/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n__webpack_require__(1);\n\nvar _mapMain = __webpack_require__(2);\n\nvar _survey = __webpack_require__(4);\n\nvar _collections = __webpack_require__(5);\n\n(function () {\n    $('[data-toggle=\"tooltip\"]').tooltip();\n\n    var mapInstance = new _mapMain.Map();\n    mapInstance.init();\n\n    var pathVoteSurvey = new _survey.Survey(mapInstance);\n    mapInstance.setSurvey(pathVoteSurvey);\n\n    var collctions = new _collections.Collections(mapInstance);\n\n    window.addEventListener('hashchange', function (e) {\n        switch (window.location.hash) {\n            case '#collection':\n                mapInstance.setModeCollection();\n                break;\n            default:\n                mapInstance.setModeView();\n        }\n    });\n})();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hc3NldHMvZnJvbnQvanMvbWFpbi5qcz82NTJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAnLi90b2dnbGUnO1xuaW1wb3J0IHsgTWFwIH0gZnJvbSAnLi9tYXAtbWFpbic7XG5pbXBvcnQgeyBTdXJ2ZXkgfSAgZnJvbSAnLi9zdXJ2ZXknO1xuaW1wb3J0IHsgQ29sbGVjdGlvbnMgfSBmcm9tICcuL2NvbGxlY3Rpb25zJztcblxuXG4oZnVuY3Rpb24oKSB7XG4gICAgJCgnW2RhdGEtdG9nZ2xlPVwidG9vbHRpcFwiXScpLnRvb2x0aXAoKTsgXG5cbiAgICBjb25zdCBtYXBJbnN0YW5jZSA9IG5ldyBNYXAoKTtcbiAgICBtYXBJbnN0YW5jZS5pbml0KCk7XG5cbiAgICBjb25zdCBwYXRoVm90ZVN1cnZleSA9IG5ldyBTdXJ2ZXkobWFwSW5zdGFuY2UpO1xuICAgIG1hcEluc3RhbmNlLnNldFN1cnZleShwYXRoVm90ZVN1cnZleSk7XG5cbiAgICBjb25zdCBjb2xsY3Rpb25zID0gbmV3IENvbGxlY3Rpb25zKG1hcEluc3RhbmNlKTtcblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgc3dpdGNoKHdpbmRvdy5sb2NhdGlvbi5oYXNoKSB7XG4gICAgICAgICAgICBjYXNlICcjY29sbGVjdGlvbic6XG4gICAgICAgICAgICAgICAgbWFwSW5zdGFuY2Uuc2V0TW9kZUNvbGxlY3Rpb24oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDogXG4gICAgICAgICAgICAgICAgbWFwSW5zdGFuY2Uuc2V0TW9kZVZpZXcoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgXG4gfSkoKTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFzc2V0cy9mcm9udC9qcy9tYWluLmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFMQTtBQU9BO0FBR0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n");

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\n$(document).on('click', '[data-toggle-open]', function (e) {\n    var taegetToggleEl = document.getElementById(e.currentTarget.getAttribute('data-toggle-for'));\n    taegetToggleEl.classList.add('active');\n});\n\n$(document).on('click', '[data-toggle-close]', function (e) {\n    var taegetToggleEl = document.getElementById(e.currentTarget.getAttribute('data-toggle-for'));\n    taegetToggleEl.classList.remove('active');\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hc3NldHMvZnJvbnQvanMvdG9nZ2xlLmpzPzJhOTYiXSwic291cmNlc0NvbnRlbnQiOlsiJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXRvZ2dsZS1vcGVuXScsIChlKSA9PiB7XG4gICAgY29uc3QgdGFlZ2V0VG9nZ2xlRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXRvZ2dsZS1mb3InKSk7XG4gICAgdGFlZ2V0VG9nZ2xlRWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7IFxufSk7XG5cbiQoZG9jdW1lbnQpLm9uKCdjbGljaycsICdbZGF0YS10b2dnbGUtY2xvc2VdJywgKGUpID0+IHtcbiAgICBjb25zdCB0YWVnZXRUb2dnbGVFbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdG9nZ2xlLWZvcicpKTtcbiAgICB0YWVnZXRUb2dnbGVFbC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbn0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhc3NldHMvZnJvbnQvanMvdG9nZ2xlLmpzIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n");

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.Map = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _mapConfig = __webpack_require__(3);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Map = exports.Map = function () {\n    function Map() {\n        _classCallCheck(this, Map);\n\n        this.myLocationLayerGroup = L.layerGroup();\n        this.popusLayerGroup = L.layerGroup();\n        this.mapResponse = {\n            settings: {},\n            ObjectsGeoJsonLayer: {},\n            CollectionsGeoJsonLayer: {}\n        };\n        this.isMapLoaded = false;\n    }\n\n    _createClass(Map, [{\n        key: 'init',\n        value: function init() {\n            var _this = this;\n\n            this.initMap();\n            this.selectInitialElements();\n            this.events();\n            this.toggleHeaderEl(true);\n            this.loading = $('.loading');\n\n            //const mapCenter = mapOption.center;\n            //const mapZoom = mapOption.zoom;\n\n            var mapStyle = L.tileLayer(_mapConfig.mapBoxUrl, {\n                attribution: _mapConfig.mapBoxAttribution,\n                // * If difference between \"maxNativeZoom\" and \"maxZoom\" === 2\n                // and \"leafLet-active-area\" is included  \"Maximum call stack size exceeded\" is thrown on max zoom reached.\n                // https://github.com/Mappy/Leaflet-active-area/issues/32\n                maxNativeZoom: 20,\n                maxZoom: 21,\n                minZoom: 11,\n                updateWhenZooming: false\n            });\n            mapStyle.addTo(this.map);\n\n            var myLocationButton = L.Control.extend({\n                options: {\n                    position: 'topleft'\n                },\n                onAdd: function onAdd() {\n                    var container = L.DomUtil.create('button', 'leaflet-bar leaflet-control-custom far fa-dot-circle');\n                    container.type = \"button\";\n                    container.onclick = function () {\n                        _this.locate();\n                    };\n                    return container;\n                }\n            });\n            this.map.addControl(new myLocationButton());\n\n            this.myLocationLayerGroup.addTo(this.map);\n\n            this.popusLayerGroup.addTo(this.map);\n\n            this.mapResponse.ObjectsGeoJsonLayer = L.geoJSON([], {\n                style: function style(feature) {\n                    var styles = _this.mapResponse.settings.styles[feature.properties._s1] ? _extends({}, _this.mapResponse.settings.styles[feature.properties._s1]) : _extends({}, _mapConfig.defaultObjectStyle);\n                    return styles;\n                },\n                onEachFeature: function onEachFeature(feature, layer) {\n                    layer.on('click', function (ev) {\n                        switch (feature.properties._behavior) {\n                            case 'navigation':\n                                _this.zoomToLayer(layer, ev);\n                                break;\n                            default:\n                                _this.onLayerClick(layer, ev);\n                                _this.zoomToLayer(layer, ev);\n                                break;\n                        }\n                    });\n                    layer.on('mouseover', function () {\n                        if (layer.feature.properties.activePopup) {\n                            return;\n                        }\n                        if (_this.mapResponse.settings.styles[feature.properties._s2]) {\n                            _this.setLayerHoverStyle(layer);\n                        }\n                    });\n                    layer.on('mouseout', function () {\n                        if (layer.feature.properties.activePopup || _this.activeLayer === layer) {\n                            return;\n                        }\n                        if (_this.mapResponse.settings.styles[feature.properties._s1]) {\n                            _this.setLayerDefaultStyle(layer);\n                        }\n                    });\n                },\n                pointToLayer: function pointToLayer(feature, latlng) {\n                    return L.circleMarker(latlng, _this.mapResponse.settings.styles[feature.properties._s1]);\n                }\n            }).addTo(this.map);\n\n            this.mapResponse.CollectionsGeoJsonLayer = L.geoJSON([], {\n                style: function style(feature) {\n                    var styles = _this.mapResponse.settings.styles[feature.properties._s1] ? _extends({}, _this.mapResponse.settings.styles[feature.properties._s1]) : _extends({}, _mapConfig.defaultObjectStyle);\n                    return styles;\n                },\n                onEachFeature: function onEachFeature(feature, layer) {\n                    layer.on('click', function (ev) {\n                        switch (feature.properties._behavior) {\n                            case 'navigation':\n                                _this.zoomToLayer(layer, ev);\n                                break;\n                            default:\n                                _this.onLayerClick(layer, ev);\n                                _this.zoomToLayer(layer, ev);\n                                break;\n                        }\n                    });\n                    layer.on('mouseover', function () {\n                        if (layer.feature.properties.activePopup) {\n                            return;\n                        }\n                        if (_this.mapResponse.settings.styles[feature.properties._s2]) {\n                            _this.setLayerHoverStyle(layer);\n                        }\n                    });\n                    layer.on('mouseout', function () {\n                        if (layer.feature.properties.activePopup || _this.activeLayer === layer) {\n                            return;\n                        }\n                        if (_this.mapResponse.settings.styles[feature.properties._s1]) {\n                            _this.setLayerDefaultStyle(layer);\n                        }\n                    });\n                },\n                pointToLayer: function pointToLayer(feature, latlng) {\n                    return L.circleMarker(latlng, _this.mapResponse.settings.styles[feature.properties._s1]);\n                }\n            }).addTo(this.map);\n\n            this.setInitialMapView();\n        }\n    }, {\n        key: 'initMap',\n        value: function initMap() {\n            var elMap = document.getElementById('mapMain');\n            if (!elMap) {\n                return;\n            }\n\n            this.map = new L.map('mapMain', {\n                updateWhenZooming: false,\n                attributionControl: false\n            });\n\n            this.map.setActiveArea(_mapConfig.defaultObjectStyle.mapActiveArea);\n        }\n    }, {\n        key: 'events',\n        value: function events() {\n            var _this2 = this,\n                _arguments = arguments;\n\n            var debounce = function debounce(func, wait) {\n                var immediate = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n                var timeout = void 0;\n                return function () {\n                    var later = function later() {\n                        timeout = null;\n                        if (!immediate) {\n                            func.apply(_this2, _arguments);\n                        }\n                    };\n\n                    var callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n\n                    if (callNow) {\n                        func.apply(_this2, _arguments);\n                    }\n                };\n            };\n\n            $(document).on('click', '[data-confirm-cancel]', function () {\n                _this2.removeAllPopups();\n            });\n\n            this.map.on('moveend', debounce(function () {\n                console.log(_this2.map);\n\n                var center = _this2.map.getCenter();\n                _this2.updateMap(center);\n            }, 200));\n\n            this.map.on('locationfound', this.setMapViewToMyLocation.bind(this));\n            this.map.on('locationerror', this.setInitialMapView.bind(this));\n\n            // window.addEventListener('resize', debounce(() => {\n            // }, 200, false), false);\n        }\n    }, {\n        key: 'setModeCollection',\n        value: function setModeCollection() {}\n    }, {\n        key: 'setModeView',\n        value: function setModeView() {}\n    }, {\n        key: 'selectInitialElements',\n        value: function selectInitialElements() {\n            _mapConfig.defaultElConfig.elHeader = document.querySelector(_mapConfig.defaultElConfig.headerId);\n        }\n    }, {\n        key: 'toggleHeaderEl',\n        value: function toggleHeaderEl(isActive) {\n            if (isActive || !_mapConfig.defaultElConfig.elHeader.classList.contains('active') && isActive) {\n                _mapConfig.defaultElConfig.elHeader.classList.add('active');\n\n                var elHeaderHeight = getComputedStyle(_mapConfig.defaultElConfig.elHeader).height;\n\n                this.map.setActiveArea(_extends({}, _mapConfig.defaultObjectStyle.mapActiveArea, {\n                    height: 'calc(' + _mapConfig.defaultObjectStyle.mapActiveArea.height + ' - ' + elHeaderHeight + ')',\n                    top: elHeaderHeight\n                }));\n            } else {\n                _mapConfig.defaultElConfig.elHeader.classList.remove('active');\n                this.map.setActiveArea(_mapConfig.defaultObjectStyle.mapActiveArea);\n            }\n        }\n    }, {\n        key: 'updateMap',\n        value: function updateMap(center) {\n            var _this3 = this;\n\n            var fn = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function () {};\n\n            var zoom = this.map.getZoom();\n            var bounds = this.map.getBounds();\n            var returnedTarget = {};\n\n            var a = {\n                in: bounds._southWest.lng + ',' + bounds._northEast.lat + ',' + bounds._northEast.lng + ',' + bounds._southWest.lat + ',',\n                zoom: zoom,\n                c: center.lat + ',' + center.lng\n            };\n\n            if (typeof b !== 'undefined') {\n                returnedTarget = Object.assign(a, b);\n            } else {\n                returnedTarget = a;\n            }\n\n            $.ajax({\n                data: returnedTarget,\n                url: '/front-end/map?',\n                success: function success(results) {\n                    _this3.isMapLoaded = true;\n                    _this3.mapResponse.settings = results.settings;\n                    _this3.mapResponse.ObjectsGeoJsonLayer.clearLayers();\n                    _this3.mapResponse.ObjectsGeoJsonLayer.addData(results.objects);\n                    _this3.mapResponse.CollectionsGeoJsonLayer.clearLayers();\n                    _this3.mapResponse.CollectionsGeoJsonLayer.addData(results.geoCollections);\n                    _this3.setLayerActiveStyle();\n                    fn();\n                }\n            });\n        }\n    }, {\n        key: 'saveViewport',\n        value: function saveViewport(center) {\n            var zoom = this.map.getZoom();\n            var a = {\n                zoom: zoom,\n                c: center.lat + ',' + center.lng\n            };\n\n            $.ajax({\n                data: a,\n                url: \"/map/z\",\n                success: function success(results) {}\n            });\n        }\n    }, {\n        key: 'locate',\n        value: function locate() {\n            this.loading.removeClass('d-none');\n            this.map.locate({\n                setView: true,\n                maxZoom: this.mapResponse.settings.default_zoom\n            });\n        }\n    }, {\n        key: 'setMapViewToMyLocation',\n        value: function setMapViewToMyLocation(e) {\n            var _this4 = this;\n\n            this.loading.addClass('d-none');\n            var radius = e.accuracy / 2;\n\n            this.myLocationLayerGroup.eachLayer(function (layer) {\n                _this4.myLocationLayerGroup.removeLayer(layer);\n            });\n\n            var center = L.circle(e.latlng, {\n                color: '#fff',\n                fillColor: '#2A93EE',\n                fillOpacity: 1,\n                weight: 4,\n                opacity: 1,\n                radius: 5\n            }).addTo(this.myLocationLayerGroup);\n\n            L.circle(e.latlng, {\n                radius: e.accuracy / 2,\n                color: '#136AEC',\n                fillColor: '#136AEC',\n                fillOpacity: 0.15,\n                weight: 0\n            }).addTo(this.myLocationLayerGroup);\n\n            center.bindPopup(\"Намирате се в радиус от \" + radius + \" метра от тази локация\", {\n                offset: L.point(0, -10)\n            });\n            center.openPopup();\n        }\n    }, {\n        key: 'setInitialMapView',\n        value: function setInitialMapView() {\n            var _this5 = this;\n\n            this.loading.addClass('d-none');\n\n            var zoom = void 0;\n            var lat = void 0;\n            var lng = void 0;\n\n            $.ajax({\n                url: \"/map/p\",\n                success: function success(results) {\n                    zoom = results.zoom;\n                    lat = results.lat;\n                    lng = results.lng;\n                    _this5.setRealInitialMapView(lat, lng, zoom);\n                }\n            });\n        }\n    }, {\n        key: 'setRealInitialMapView',\n        value: function setRealInitialMapView(lat, lng, zoom) {\n            this.map.setView([lat, lng], zoom);\n        }\n    }, {\n        key: 'zoomToLayer',\n        value: function zoomToLayer(layer, ev, coordinates) {\n            var clickCoordinates = coordinates || ev.latlng;\n            if (layer.feature.properties._zoom && layer.feature.properties._zoom !== this.map.getZoom()) {\n                this.map.setView(clickCoordinates, layer.feature.properties._zoom);\n            } else {\n                this.map.setView(clickCoordinates);\n\n                this.saveViewport(clickCoordinates);\n            }\n        }\n    }, {\n        key: 'onLayerClick',\n        value: function onLayerClick(layer, ev) {\n            layer.feature.properties.activePopup = true;\n            this.setLayerActiveStyle(layer);\n            this.removeAllPopups();\n            console.log(layer.feature.properties._behavior);\n\n            if (layer.feature.properties._behavior === 'survey') {\n                this.openSuerveyPopup(layer, ev);\n            }\n\n            switch (layer.feature.properties._behavior) {\n                case 'info':\n                    this.openInfoPopup(layer, ev);\n                    break;\n                case 'survey':\n                    this.openSuerveyPopup(layer, ev);\n                    break;\n                case 'collections':\n                    this.addCollection(layer, ev);\n                    break;\n\n            }\n        }\n    }, {\n        key: 'removeAllPopups',\n        value: function removeAllPopups() {\n            var _this6 = this;\n\n            this.map.closePopup();\n            this.popusLayerGroup.eachLayer(function (layer) {\n                _this6.popusLayerGroup.removeLayer(layer);\n            });\n        }\n    }, {\n        key: 'onPopupClose',\n        value: function onPopupClose(layer) {\n            layer.feature.properties.activePopup = false;\n            this.activeLayer = null;\n            this.setLayerDefaultStyle(layer);\n            this.removeAllPopups();\n        }\n    }, {\n        key: 'openInfoPopup',\n        value: function openInfoPopup(layer, ev) {\n            var _this7 = this;\n\n            var coordinates = this.map.mouseEventToLatLng(ev.originalEvent);\n\n            var popupLayer = L.circle(coordinates, {\n                fillOpacity: 0,\n                weight: 0,\n                opacity: 0,\n                radius: 1\n            }).addTo(this.popusLayerGroup);\n\n            var infoTemplate = '\\n            <p class=\"text-center\">\\n                <!-- <form method=\"post\" class=\"m-form\" action=\"/front-end/geo-collection/add\">\\n                    <input type=\"hidden\" name=\"geo-object\" value=\"' + layer.feature.properties.id + '\">\\n                    <button type=\"submit\">' + layer.feature.properties.id + '</button>\\n                </form> -->\\n                ' + layer.feature.properties.type + '<br />' + layer.feature.properties.name + '\\n            </p>\\n        ';\n\n            var popupContent = infoTemplate;\n\n            popupLayer.bindPopup(popupContent, {\n                offset: L.point(0, -20)\n            }).on('popupclose', function () {\n                _this7.onPopupClose(layer);\n            }).openPopup();\n        }\n    }, {\n        key: 'openSuerveyPopup',\n        value: function openSuerveyPopup(layer, ev) {\n            var _this8 = this;\n\n            var coordinates = this.map.mouseEventToLatLng(ev.originalEvent);\n            this.setSurveyData(layer, ev);\n\n            var popupLayer = L.circle(coordinates, {\n                fillOpacity: 0,\n                weight: 0,\n                opacity: 0,\n                radius: 1\n            }).addTo(this.popusLayerGroup);\n\n            var surveyTemplate = '\\n            <p class=\"text-center\">\\n                <!-- <form method=\"post\" class=\"m-form\" action=\"/front-end/geo-collection/add\">\\n                    <input type=\"hidden\" name=\"geo-object\" value=\"' + layer.feature.properties.id + '\">\\n                    <button type=\"submit\">' + layer.feature.properties.id + '</button>\\n                </form> -->\\n                ' + layer.feature.properties.type + '<br />' + layer.feature.properties.name + '\\n            </p>\\n            <div class=\"survey-modal\">\\n                <div class=\"container py-4\">\\n                    <div class=\"row\">\\n                        <div class=\"col-12 text-center\">\\n                            <h5 class=\"font-weight-bold mb-3\" data-confirm-title>\\n                              \\u0418\\u0441\\u043A\\u0430\\u0442\\u0435 \\u043B\\u0438 \\u0434\\u0430 \\u043E\\u0446\\u0435\\u043D\\u0438\\u0442\\u0435\\n                            </h5>\\n                        </div>\\n                        <div class=\"col-12 text-center\">\\n                            <button data-toggle-open data-toggle-for=\"path-vote-suevey\"  data-url=\"' + (_mapConfig.apiEndpoints.geo + layer.feature.properties.id) + '\" class=\"btn btn-success mr-3 px-4\">\\u0414\\u0410</button>\\n                            <button data-confirm-cancel class=\"btn btn-danger cursor-pointer px-4\">\\u041D\\u0415</button>\\n                        </div>\\n                    </div>\\n                </div>\\n            </div>';\n\n            var popupContent = surveyTemplate;\n\n            popupLayer.bindPopup(popupContent, {\n                offset: L.point(0, -20)\n            }).on('popupclose', function () {\n                _this8.onPopupClose(layer);\n            }).openPopup();\n        }\n    }, {\n        key: 'addCollection',\n        value: function addCollection() {\n            var _this9 = this;\n\n            var collection = mapOption.collection;\n\n            if (typeof collection !== 'undefined') {\n                $.ajax({\n                    type: \"POST\",\n                    url: '/front-end/geo-collection/add',\n                    data: {\n                        'geo-object': layer.feature.properties.id,\n                        'collection': collection\n                    },\n                    success: function success() {\n                        _this9.updateMap();\n                    }\n                });\n            }\n        }\n    }, {\n        key: 'setLayerDefaultStyle',\n        value: function setLayerDefaultStyle(layer) {\n            layer.setStyle(this.mapResponse.settings.styles[layer.feature.properties._s1] || _mapConfig.defaultObjectStyle);\n        }\n    }, {\n        key: 'setLayerHoverStyle',\n        value: function setLayerHoverStyle(layer) {\n            layer.setStyle(this.mapResponse.settings.styles[layer.feature.properties._s2]);\n        }\n    }, {\n        key: 'setLayerActiveStyle',\n        value: function setLayerActiveStyle(layer) {\n            if (layer) {\n                this.activeLayer = layer;\n            } else if (!this.activeLayer) {\n                return;\n            } else {\n                this.activeLayer.addTo(this.map);\n            }\n\n            this.activeLayer.bringToFront();\n\n            switch (this.activeLayer.feature.geometry.type) {\n                case 'Point':\n                    this.activeLayer.setStyle(this.mapResponse.settings.styles['on_dialog_point']);\n                    break;\n                case 'MultiLineString':\n                    this.activeLayer.setStyle(this.mapResponse.settings.styles['on_dialog_line']);\n                    break;\n                case 'Polygon':\n                    this.activeLayer.setStyle(this.mapResponse.settings.styles['on_dialog_polygon']);\n                    break;\n            }\n        }\n    }, {\n        key: 'setSurvey',\n        value: function setSurvey(voteSurvay) {\n            this.voteSurvay = voteSurvay;\n        }\n    }, {\n        key: 'setSurveyData',\n        value: function setSurveyData(layer, ev) {\n            this.voteSurvay.setLayerData(layer, ev);\n        }\n\n        // closeSurvey() => {\n        // pathVoteSurvey.close();\n        // }\n\n    }]);\n\n    return Map;\n}();\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hc3NldHMvZnJvbnQvanMvbWFwLW1haW4uanM/NzkzNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYXBCb3hBdHRyaWJ1dGlvbiwgbWFwQm94VXJsLCBhcGlFbmRwb2ludHMsIGRlZmF1bHRPYmplY3RTdHlsZSwgZGVmYXVsdEVsQ29uZmlnIH0gZnJvbSAnLi9tYXAtY29uZmlnJztcblxuZXhwb3J0IGNsYXNzIE1hcCB7XG4gICAgbWFwO1xuICAgIGFjdGl2ZUxheWVyO1xuICAgIG15TG9jYXRpb25MYXllckdyb3VwID0gTC5sYXllckdyb3VwKCk7XG4gICAgcG9wdXNMYXllckdyb3VwID0gTC5sYXllckdyb3VwKCk7XG4gICAgdm90ZVN1cnZheTtcbiAgICBtYXBSZXNwb25zZSA9IHtcbiAgICAgICAgc2V0dGluZ3M6IHt9LFxuICAgICAgICBPYmplY3RzR2VvSnNvbkxheWVyOiB7fSxcbiAgICAgICAgQ29sbGVjdGlvbnNHZW9Kc29uTGF5ZXI6IHt9LFxuICAgIH07XG4gICAgaXNNYXBMb2FkZWQgPSBmYWxzZTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuaW5pdE1hcCgpO1xuICAgICAgICB0aGlzLnNlbGVjdEluaXRpYWxFbGVtZW50cygpO1xuICAgICAgICB0aGlzLmV2ZW50cygpO1xuICAgICAgICB0aGlzLnRvZ2dsZUhlYWRlckVsKHRydWUpO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSAkKCcubG9hZGluZycpO1xuICAgICAgIFxuICAgICAgICAvL2NvbnN0IG1hcENlbnRlciA9IG1hcE9wdGlvbi5jZW50ZXI7XG4gICAgICAgIC8vY29uc3QgbWFwWm9vbSA9IG1hcE9wdGlvbi56b29tO1xuXG4gICAgICAgIGxldCBtYXBTdHlsZSA9IEwudGlsZUxheWVyKG1hcEJveFVybCwge1xuICAgICAgICAgICAgYXR0cmlidXRpb246IG1hcEJveEF0dHJpYnV0aW9uLFxuICAgICAgICAgICAgLy8gKiBJZiBkaWZmZXJlbmNlIGJldHdlZW4gXCJtYXhOYXRpdmVab29tXCIgYW5kIFwibWF4Wm9vbVwiID09PSAyXG4gICAgICAgICAgICAvLyBhbmQgXCJsZWFmTGV0LWFjdGl2ZS1hcmVhXCIgaXMgaW5jbHVkZWQgIFwiTWF4aW11bSBjYWxsIHN0YWNrIHNpemUgZXhjZWVkZWRcIiBpcyB0aHJvd24gb24gbWF4IHpvb20gcmVhY2hlZC5cbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9NYXBweS9MZWFmbGV0LWFjdGl2ZS1hcmVhL2lzc3Vlcy8zMlxuICAgICAgICAgICAgbWF4TmF0aXZlWm9vbTogMjAsIFxuICAgICAgICAgICAgbWF4Wm9vbTogMjEsXG4gICAgICAgICAgICBtaW5ab29tOiAxMSxcbiAgICAgICAgICAgIHVwZGF0ZVdoZW5ab29taW5nOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICAgICAgbWFwU3R5bGUuYWRkVG8odGhpcy5tYXApO1xuXG4gICAgICAgIGxldCBteUxvY2F0aW9uQnV0dG9uID0gTC5Db250cm9sLmV4dGVuZCh7XG4gICAgICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3BsZWZ0J1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uQWRkOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgbGV0IGNvbnRhaW5lciA9IEwuRG9tVXRpbC5jcmVhdGUoJ2J1dHRvbicsICdsZWFmbGV0LWJhciBsZWFmbGV0LWNvbnRyb2wtY3VzdG9tIGZhciBmYS1kb3QtY2lyY2xlJyk7XG4gICAgICAgICAgICAgICAgY29udGFpbmVyLnR5cGUgPSBcImJ1dHRvblwiO1xuICAgICAgICAgICAgICAgIGNvbnRhaW5lci5vbmNsaWNrID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvY2F0ZSgpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFwLmFkZENvbnRyb2wobmV3IG15TG9jYXRpb25CdXR0b24oKSk7XG5cbiAgICAgICAgXG4gICAgICAgIHRoaXMubXlMb2NhdGlvbkxheWVyR3JvdXAuYWRkVG8odGhpcy5tYXApO1xuXG4gICAgICAgIHRoaXMucG9wdXNMYXllckdyb3VwLmFkZFRvKHRoaXMubWFwKTtcblxuICAgICAgIFxuXG4gICAgICAgIHRoaXMubWFwUmVzcG9uc2UuT2JqZWN0c0dlb0pzb25MYXllciA9IEwuZ2VvSlNPTihbXSwgeyBcbiAgICAgICAgICAgIHN0eWxlOiAoZmVhdHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzdHlsZXMgPSB0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tmZWF0dXJlLnByb3BlcnRpZXMuX3MxXSA/IHsuLi50aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tmZWF0dXJlLnByb3BlcnRpZXMuX3MxXX0gOiB7Li4uZGVmYXVsdE9iamVjdFN0eWxlfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRWFjaEZlYXR1cmU6IChmZWF0dXJlLCBsYXllcikgPT4ge1xuICAgICAgICAgICAgICAgIGxheWVyLm9uKCdjbGljaycsIChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZlYXR1cmUucHJvcGVydGllcy5fYmVoYXZpb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25hdmlnYXRpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbVRvTGF5ZXIobGF5ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkxheWVyQ2xpY2sobGF5ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21Ub0xheWVyKGxheWVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsYXllci5vbignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFjdGl2ZVBvcHVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tmZWF0dXJlLnByb3BlcnRpZXMuX3MyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMYXllckhvdmVyU3R5bGUobGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGF5ZXIub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFjdGl2ZVBvcHVwIHx8IHRoaXMuYWN0aXZlTGF5ZXIgPT09IGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3Muc3R5bGVzW2ZlYXR1cmUucHJvcGVydGllcy5fczFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldExheWVyRGVmYXVsdFN0eWxlKGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvaW50VG9MYXllcjogKGZlYXR1cmUsIGxhdGxuZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBMLmNpcmNsZU1hcmtlcihsYXRsbmcsIHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3Muc3R5bGVzW2ZlYXR1cmUucHJvcGVydGllcy5fczFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApO1xuXG5cbiAgICAgICAgdGhpcy5tYXBSZXNwb25zZS5Db2xsZWN0aW9uc0dlb0pzb25MYXllciA9IEwuZ2VvSlNPTihbXSwgeyBcbiAgICAgICAgICAgIHN0eWxlOiAoZmVhdHVyZSkgPT4ge1xuICAgICAgICAgICAgICAgIGxldCBzdHlsZXMgPSB0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tmZWF0dXJlLnByb3BlcnRpZXMuX3MxXSA/IHsuLi50aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tmZWF0dXJlLnByb3BlcnRpZXMuX3MxXX0gOiB7Li4uZGVmYXVsdE9iamVjdFN0eWxlfTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGVzO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG9uRWFjaEZlYXR1cmU6IChmZWF0dXJlLCBsYXllcikgPT4ge1xuICAgICAgICAgICAgICAgIGxheWVyLm9uKCdjbGljaycsIChldikgPT4ge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGZlYXR1cmUucHJvcGVydGllcy5fYmVoYXZpb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25hdmlnYXRpb24nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuem9vbVRvTGF5ZXIobGF5ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkxheWVyQ2xpY2sobGF5ZXIsIGV2KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnpvb21Ub0xheWVyKGxheWVyLCBldik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBsYXllci5vbignbW91c2VvdmVyJywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFjdGl2ZVBvcHVwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47IFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tmZWF0dXJlLnByb3BlcnRpZXMuX3MyXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRMYXllckhvdmVyU3R5bGUobGF5ZXIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgbGF5ZXIub24oJ21vdXNlb3V0JywgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFjdGl2ZVBvcHVwIHx8IHRoaXMuYWN0aXZlTGF5ZXIgPT09IGxheWVyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3Muc3R5bGVzW2ZlYXR1cmUucHJvcGVydGllcy5fczFdKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldExheWVyRGVmYXVsdFN0eWxlKGxheWVyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHBvaW50VG9MYXllcjogKGZlYXR1cmUsIGxhdGxuZykgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBMLmNpcmNsZU1hcmtlcihsYXRsbmcsIHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3Muc3R5bGVzW2ZlYXR1cmUucHJvcGVydGllcy5fczFdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuYWRkVG8odGhpcy5tYXApO1xuXG4gICAgICAgIHRoaXMuc2V0SW5pdGlhbE1hcFZpZXcoKTtcbiAgICB9XG5cbiAgICBpbml0TWFwKCkge1xuICAgICAgICBjb25zdCBlbE1hcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXBNYWluJyk7XG4gICAgICAgIGlmICghZWxNYXApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubWFwID0gbmV3IEwubWFwKCdtYXBNYWluJywge1xuICAgICAgICAgICAgdXBkYXRlV2hlblpvb21pbmc6IGZhbHNlLFxuICAgICAgICAgICAgYXR0cmlidXRpb25Db250cm9sOiBmYWxzZVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm1hcC5zZXRBY3RpdmVBcmVhKGRlZmF1bHRPYmplY3RTdHlsZS5tYXBBY3RpdmVBcmVhKTtcbiAgICB9XG5cbiAgICBldmVudHMoKSB7XG4gICAgICAgIGNvbnN0IGRlYm91bmNlID0gKGZ1bmMsIHdhaXQsIGltbWVkaWF0ZSA9IGZhbHNlKSA9PiB7XG4gICAgICAgICAgICBsZXQgdGltZW91dDtcbiAgICAgICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgbGF0ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWltbWVkaWF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuYy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGNhbGxOb3cgPSBpbW1lZGlhdGUgJiYgIXRpbWVvdXQ7XG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblxuICAgICAgICAgICAgICAgIGlmIChjYWxsTm93KSB7XG4gICAgICAgICAgICAgICAgICAgIGZ1bmMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLWNvbmZpcm0tY2FuY2VsXScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQWxsUG9wdXBzKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgXG4gICAgICAgIHRoaXMubWFwLm9uKCdtb3ZlZW5kJywgZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5tYXApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjZW50ZXIgPSB0aGlzLm1hcC5nZXRDZW50ZXIoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTWFwKGNlbnRlcik7XG4gICAgICAgIH0sIDIwMCkpO1xuXG4gICAgICAgIHRoaXMubWFwLm9uKCdsb2NhdGlvbmZvdW5kJywgdGhpcy5zZXRNYXBWaWV3VG9NeUxvY2F0aW9uLmJpbmQodGhpcykpO1xuICAgICAgICB0aGlzLm1hcC5vbignbG9jYXRpb25lcnJvcicsIHRoaXMuc2V0SW5pdGlhbE1hcFZpZXcuYmluZCh0aGlzKSk7XG4gICAgICAgIFxuICAgICAgICAvLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgZGVib3VuY2UoKCkgPT4ge1xuICAgICAgICAvLyB9LCAyMDAsIGZhbHNlKSwgZmFsc2UpO1xuICAgIH1cblxuICAgIHNldE1vZGVDb2xsZWN0aW9uKCkge1xuXG4gICAgfVxuXG4gICAgc2V0TW9kZVZpZXcoKSB7XG5cbiAgICB9XG5cbiAgICBzZWxlY3RJbml0aWFsRWxlbWVudHMoKSB7XG4gICAgICAgIGRlZmF1bHRFbENvbmZpZy5lbEhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZGVmYXVsdEVsQ29uZmlnLmhlYWRlcklkKTtcbiAgICB9XG5cbiAgICB0b2dnbGVIZWFkZXJFbChpc0FjdGl2ZSkge1xuICAgICAgICBpZiAoaXNBY3RpdmUgfHwgIWRlZmF1bHRFbENvbmZpZy5lbEhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpICYmIGlzQWN0aXZlKSB7XG4gICAgICAgICAgICBkZWZhdWx0RWxDb25maWcuZWxIZWFkZXIuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGVsSGVhZGVySGVpZ2h0ID0gZ2V0Q29tcHV0ZWRTdHlsZShkZWZhdWx0RWxDb25maWcuZWxIZWFkZXIpLmhlaWdodDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5tYXAuc2V0QWN0aXZlQXJlYSh7XG4gICAgICAgICAgICAgICAgLi4uZGVmYXVsdE9iamVjdFN0eWxlLm1hcEFjdGl2ZUFyZWEsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBgY2FsYygke2RlZmF1bHRPYmplY3RTdHlsZS5tYXBBY3RpdmVBcmVhLmhlaWdodH0gLSAke2VsSGVhZGVySGVpZ2h0fSlgLFxuICAgICAgICAgICAgICAgIHRvcDogZWxIZWFkZXJIZWlnaHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlZmF1bHRFbENvbmZpZy5lbEhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMubWFwLnNldEFjdGl2ZUFyZWEoZGVmYXVsdE9iamVjdFN0eWxlLm1hcEFjdGl2ZUFyZWEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgdXBkYXRlTWFwKGNlbnRlciwgZm4gPSAoKSA9PiB7XG4gICAgfSkge1xuICAgICAgICBsZXQgem9vbSA9IHRoaXMubWFwLmdldFpvb20oKTtcbiAgICAgICAgbGV0IGJvdW5kcyA9IHRoaXMubWFwLmdldEJvdW5kcygpO1xuICAgICAgICBsZXQgcmV0dXJuZWRUYXJnZXQgPSB7fTtcblxuICAgICAgICBsZXQgYSA9IHtcbiAgICAgICAgICAgIGluOiBib3VuZHMuX3NvdXRoV2VzdC5sbmcgKyAnLCcgK1xuICAgICAgICAgICAgYm91bmRzLl9ub3J0aEVhc3QubGF0ICsgJywnICtcbiAgICAgICAgICAgIGJvdW5kcy5fbm9ydGhFYXN0LmxuZyArICcsJyArXG4gICAgICAgICAgICBib3VuZHMuX3NvdXRoV2VzdC5sYXQgKyAnLCcsXG4gICAgICAgICAgICB6b29tOiB6b29tLFxuICAgICAgICAgICAgYzogY2VudGVyLmxhdCArICcsJyArIGNlbnRlci5sbmdcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAodHlwZW9mIGIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICByZXR1cm5lZFRhcmdldCA9IE9iamVjdC5hc3NpZ24oYSwgYik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm5lZFRhcmdldCA9IGE7XG4gICAgICAgIH1cblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgZGF0YTogcmV0dXJuZWRUYXJnZXQsXG4gICAgICAgICAgICB1cmw6ICcvZnJvbnQtZW5kL21hcD8nLFxuICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdHMpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzTWFwTG9hZGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzID0gcmVzdWx0cy5zZXR0aW5ncztcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFJlc3BvbnNlLk9iamVjdHNHZW9Kc29uTGF5ZXIuY2xlYXJMYXllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFJlc3BvbnNlLk9iamVjdHNHZW9Kc29uTGF5ZXIuYWRkRGF0YShyZXN1bHRzLm9iamVjdHMpO1xuICAgICAgICAgICAgICAgIHRoaXMubWFwUmVzcG9uc2UuQ29sbGVjdGlvbnNHZW9Kc29uTGF5ZXIuY2xlYXJMYXllcnMoKTtcbiAgICAgICAgICAgICAgICB0aGlzLm1hcFJlc3BvbnNlLkNvbGxlY3Rpb25zR2VvSnNvbkxheWVyLmFkZERhdGEocmVzdWx0cy5nZW9Db2xsZWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRMYXllckFjdGl2ZVN0eWxlKCk7XG4gICAgICAgICAgICAgICAgZm4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2F2ZVZpZXdwb3J0KGNlbnRlcikge1xuICAgICAgICBsZXQgem9vbSA9IHRoaXMubWFwLmdldFpvb20oKTtcbiAgICAgICAgbGV0IGEgPSB7XG4gICAgICAgICAgICB6b29tOiB6b29tLFxuICAgICAgICAgICAgYzogY2VudGVyLmxhdCArICcsJyArIGNlbnRlci5sbmdcbiAgICAgICAgfTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgZGF0YTogYSxcbiAgICAgICAgICAgIHVybDogXCIvbWFwL3pcIixcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXN1bHRzKSA9PiB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgbG9jYXRlKCkge1xuICAgICAgICB0aGlzLmxvYWRpbmcucmVtb3ZlQ2xhc3MoJ2Qtbm9uZScpO1xuICAgICAgICB0aGlzLm1hcC5sb2NhdGUoe1xuICAgICAgICAgICAgc2V0VmlldzogdHJ1ZSxcbiAgICAgICAgICAgIG1heFpvb206IHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3MuZGVmYXVsdF96b29tXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNldE1hcFZpZXdUb015TG9jYXRpb24oZSkge1xuICAgICAgICB0aGlzLmxvYWRpbmcuYWRkQ2xhc3MoJ2Qtbm9uZScpO1xuICAgICAgICBsZXQgcmFkaXVzID0gZS5hY2N1cmFjeSAvIDI7XG5cbiAgICAgICAgdGhpcy5teUxvY2F0aW9uTGF5ZXJHcm91cC5lYWNoTGF5ZXIoKGxheWVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm15TG9jYXRpb25MYXllckdyb3VwLnJlbW92ZUxheWVyKGxheWVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbGV0IGNlbnRlciA9IEwuY2lyY2xlKGUubGF0bG5nLCB7XG4gICAgICAgICAgICBjb2xvcjogJyNmZmYnLFxuICAgICAgICAgICAgZmlsbENvbG9yOiAnIzJBOTNFRScsXG4gICAgICAgICAgICBmaWxsT3BhY2l0eTogMSxcbiAgICAgICAgICAgIHdlaWdodDogNCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICByYWRpdXM6IDVcbiAgICAgICAgfSkuYWRkVG8odGhpcy5teUxvY2F0aW9uTGF5ZXJHcm91cCk7XG5cbiAgICAgICAgTC5jaXJjbGUoZS5sYXRsbmcsIHtcbiAgICAgICAgICAgIHJhZGl1czogZS5hY2N1cmFjeSAvIDIsXG4gICAgICAgICAgICBjb2xvcjogJyMxMzZBRUMnLFxuICAgICAgICAgICAgZmlsbENvbG9yOiAnIzEzNkFFQycsXG4gICAgICAgICAgICBmaWxsT3BhY2l0eTogMC4xNSxcbiAgICAgICAgICAgIHdlaWdodDogMFxuICAgICAgICB9KS5hZGRUbyh0aGlzLm15TG9jYXRpb25MYXllckdyb3VwKTtcblxuICAgICAgICBjZW50ZXIuYmluZFBvcHVwKFwi0J3QsNC80LjRgNCw0YLQtSDRgdC1INCyINGA0LDQtNC40YPRgSDQvtGCIFwiICsgcmFkaXVzICsgXCIg0LzQtdGC0YDQsCDQvtGCINGC0LDQt9C4INC70L7QutCw0YbQuNGPXCIsIHtcbiAgICAgICAgICAgIG9mZnNldDogTC5wb2ludCgwLCAtMTApXG4gICAgICAgIH0pO1xuICAgICAgICBjZW50ZXIub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgc2V0SW5pdGlhbE1hcFZpZXcoKSB7XG4gICAgICAgIHRoaXMubG9hZGluZy5hZGRDbGFzcygnZC1ub25lJyk7XG5cbiAgICAgICAgbGV0IHpvb207XG4gICAgICAgIGxldCBsYXQ7XG4gICAgICAgIGxldCBsbmc7XG5cbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogXCIvbWFwL3BcIixcbiAgICAgICAgICAgIHN1Y2Nlc3M6IChyZXN1bHRzKSA9PiB7XG4gICAgICAgICAgICAgICAgem9vbSA9IHJlc3VsdHMuem9vbTtcbiAgICAgICAgICAgICAgICBsYXQgPSByZXN1bHRzLmxhdDtcbiAgICAgICAgICAgICAgICBsbmcgPSByZXN1bHRzLmxuZztcbiAgICAgICAgICAgICAgICB0aGlzLnNldFJlYWxJbml0aWFsTWFwVmlldyhsYXQsIGxuZywgem9vbSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgc2V0UmVhbEluaXRpYWxNYXBWaWV3KGxhdCwgbG5nLCB6b29tKSB7XG4gICAgICAgIHRoaXMubWFwLnNldFZpZXcoW2xhdCwgbG5nXSwgem9vbSlcbiAgICB9XG5cbiAgICB6b29tVG9MYXllcihsYXllciwgZXYsIGNvb3JkaW5hdGVzKSB7XG4gICAgICAgIGxldCBjbGlja0Nvb3JkaW5hdGVzID0gY29vcmRpbmF0ZXMgfHwgZXYubGF0bG5nO1xuICAgICAgICBpZiAobGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLl96b29tICYmIGxheWVyLmZlYXR1cmUucHJvcGVydGllcy5fem9vbSAhPT0gdGhpcy5tYXAuZ2V0Wm9vbSgpKSB7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXRWaWV3KGNsaWNrQ29vcmRpbmF0ZXMsIGxheWVyLmZlYXR1cmUucHJvcGVydGllcy5fem9vbSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm1hcC5zZXRWaWV3KGNsaWNrQ29vcmRpbmF0ZXMpO1xuXG4gICAgICAgICAgICB0aGlzLnNhdmVWaWV3cG9ydChjbGlja0Nvb3JkaW5hdGVzKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIG9uTGF5ZXJDbGljayhsYXllciwgZXYpIHtcbiAgICAgICAgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFjdGl2ZVBvcHVwID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRMYXllckFjdGl2ZVN0eWxlKGxheWVyKTtcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxQb3B1cHMoKTtcbiAgICAgICBjb25zb2xlLmxvZyhsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuX2JlaGF2aW9yICk7XG4gICAgICAgXG4gICAgICAgIGlmIChsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuX2JlaGF2aW9yID09PSAnc3VydmV5Jykge1xuICAgICAgICAgICAgdGhpcy5vcGVuU3VlcnZleVBvcHVwKGxheWVyLCBldik7XG4gICAgICAgIH1cblxuICAgICAgICBzd2l0Y2ggKGxheWVyLmZlYXR1cmUucHJvcGVydGllcy5fYmVoYXZpb3IpIHtcbiAgICAgICAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgICAgICAgICAgIHRoaXMub3BlbkluZm9Qb3B1cChsYXllciwgZXYpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzdXJ2ZXknOlxuICAgICAgICAgICAgICAgIHRoaXMub3BlblN1ZXJ2ZXlQb3B1cChsYXllciwgZXYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnY29sbGVjdGlvbnMnOlxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQ29sbGVjdGlvbihsYXllciwgZXYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVBbGxQb3B1cHMoKSB7XG4gICAgICAgIHRoaXMubWFwLmNsb3NlUG9wdXAoKTtcbiAgICAgICAgdGhpcy5wb3B1c0xheWVyR3JvdXAuZWFjaExheWVyKChsYXllcikgPT4ge1xuICAgICAgICAgICAgdGhpcy5wb3B1c0xheWVyR3JvdXAucmVtb3ZlTGF5ZXIobGF5ZXIpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBvblBvcHVwQ2xvc2UobGF5ZXIpIHtcbiAgICAgICAgbGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmFjdGl2ZVBvcHVwID0gZmFsc2U7XG4gICAgICAgIHRoaXMuYWN0aXZlTGF5ZXIgPSBudWxsO1xuICAgICAgICB0aGlzLnNldExheWVyRGVmYXVsdFN0eWxlKGxheWVyKTtcbiAgICAgICAgdGhpcy5yZW1vdmVBbGxQb3B1cHMoKTtcbiAgICB9XG5cbiAgICBvcGVuSW5mb1BvcHVwKGxheWVyLCBldikge1xuICAgICAgICBjb25zdCBjb29yZGluYXRlcyA9IHRoaXMubWFwLm1vdXNlRXZlbnRUb0xhdExuZyhldi5vcmlnaW5hbEV2ZW50KTtcblxuICAgICAgICBsZXQgcG9wdXBMYXllciA9IEwuY2lyY2xlKGNvb3JkaW5hdGVzLCB7XG4gICAgICAgICAgICBmaWxsT3BhY2l0eTogMCxcbiAgICAgICAgICAgIHdlaWdodDogMCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICByYWRpdXM6IDFcbiAgICAgICAgfSkuYWRkVG8odGhpcy5wb3B1c0xheWVyR3JvdXApO1xuXG4gICAgICAgIGNvbnN0IGluZm9UZW1wbGF0ZSA9IGBcbiAgICAgICAgICAgIDxwIGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICA8IS0tIDxmb3JtIG1ldGhvZD1cInBvc3RcIiBjbGFzcz1cIm0tZm9ybVwiIGFjdGlvbj1cIi9mcm9udC1lbmQvZ2VvLWNvbGxlY3Rpb24vYWRkXCI+XG4gICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwiaGlkZGVuXCIgbmFtZT1cImdlby1vYmplY3RcIiB2YWx1ZT1cIiR7bGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmlkfVwiPlxuICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJzdWJtaXRcIj4ke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5pZH08L2J1dHRvbj5cbiAgICAgICAgICAgICAgICA8L2Zvcm0+IC0tPlxuICAgICAgICAgICAgICAgICR7bGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLnR5cGV9PGJyIC8+JHtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMubmFtZX1cbiAgICAgICAgICAgIDwvcD5cbiAgICAgICAgYDtcblxuICAgICAgICBjb25zdCBwb3B1cENvbnRlbnQgPSBpbmZvVGVtcGxhdGU7XG5cbiAgICAgICAgcG9wdXBMYXllci5iaW5kUG9wdXAocG9wdXBDb250ZW50LCB7XG4gICAgICAgICAgICBvZmZzZXQ6IEwucG9pbnQoMCwgLTIwKVxuICAgICAgICB9KS5vbigncG9wdXBjbG9zZScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMub25Qb3B1cENsb3NlKGxheWVyKTtcbiAgICAgICAgfSkub3BlblBvcHVwKCk7XG4gICAgfVxuXG4gICAgb3BlblN1ZXJ2ZXlQb3B1cChsYXllciwgZXYpIHtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZXMgPSB0aGlzLm1hcC5tb3VzZUV2ZW50VG9MYXRMbmcoZXYub3JpZ2luYWxFdmVudCk7XG4gICAgICAgIHRoaXMuc2V0U3VydmV5RGF0YShsYXllciwgZXYpO1xuXG4gICAgICAgIGxldCBwb3B1cExheWVyID0gTC5jaXJjbGUoY29vcmRpbmF0ZXMsIHtcbiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAwLFxuICAgICAgICAgICAgd2VpZ2h0OiAwLFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHJhZGl1czogMVxuICAgICAgICB9KS5hZGRUbyh0aGlzLnBvcHVzTGF5ZXJHcm91cCk7XG5cbiAgICAgICAgY29uc3Qgc3VydmV5VGVtcGxhdGUgPSBgXG4gICAgICAgICAgICA8cCBjbGFzcz1cInRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgPCEtLSA8Zm9ybSBtZXRob2Q9XCJwb3N0XCIgY2xhc3M9XCJtLWZvcm1cIiBhY3Rpb249XCIvZnJvbnQtZW5kL2dlby1jb2xsZWN0aW9uL2FkZFwiPlxuICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImhpZGRlblwiIG5hbWU9XCJnZW8tb2JqZWN0XCIgdmFsdWU9XCIke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5pZH1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPVwic3VibWl0XCI+JHtsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuaWR9PC9idXR0b24+XG4gICAgICAgICAgICAgICAgPC9mb3JtPiAtLT5cbiAgICAgICAgICAgICAgICAke2xheWVyLmZlYXR1cmUucHJvcGVydGllcy50eXBlfTxiciAvPiR7bGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLm5hbWV9XG4gICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VydmV5LW1vZGFsXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lciBweS00XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtMTIgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJmb250LXdlaWdodC1ib2xkIG1iLTNcIiBkYXRhLWNvbmZpcm0tdGl0bGU+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICDQmNGB0LrQsNGC0LUg0LvQuCDQtNCwINC+0YbQtdC90LjRgtC1XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9oNT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMiB0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS10b2dnbGUtb3BlbiBkYXRhLXRvZ2dsZS1mb3I9XCJwYXRoLXZvdGUtc3VldmV5XCIgIGRhdGEtdXJsPVwiJHsgYXBpRW5kcG9pbnRzLmdlbyArIGxheWVyLmZlYXR1cmUucHJvcGVydGllcy5pZCB9XCIgY2xhc3M9XCJidG4gYnRuLXN1Y2Nlc3MgbXItMyBweC00XCI+0JTQkDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gZGF0YS1jb25maXJtLWNhbmNlbCBjbGFzcz1cImJ0biBidG4tZGFuZ2VyIGN1cnNvci1wb2ludGVyIHB4LTRcIj7QndCVPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5gO1xuXG4gICAgICAgIGNvbnN0IHBvcHVwQ29udGVudCA9IHN1cnZleVRlbXBsYXRlO1xuXG4gICAgICAgIHBvcHVwTGF5ZXIuYmluZFBvcHVwKHBvcHVwQ29udGVudCwge1xuICAgICAgICAgICAgb2Zmc2V0OiBMLnBvaW50KDAsIC0yMClcbiAgICAgICAgfSkub24oJ3BvcHVwY2xvc2UnLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9uUG9wdXBDbG9zZShsYXllcik7XG4gICAgICAgIH0pLm9wZW5Qb3B1cCgpO1xuICAgIH1cblxuICAgIGFkZENvbGxlY3Rpb24oKSB7XG4gICAgICAgIGxldCBjb2xsZWN0aW9uID0gbWFwT3B0aW9uLmNvbGxlY3Rpb247XG5cbiAgICAgICAgaWYgKHR5cGVvZiBjb2xsZWN0aW9uICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6ICcvZnJvbnQtZW5kL2dlby1jb2xsZWN0aW9uL2FkZCcsXG4gICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAnZ2VvLW9iamVjdCc6IGxheWVyLmZlYXR1cmUucHJvcGVydGllcy5pZCxcbiAgICAgICAgICAgICAgICAgICAgJ2NvbGxlY3Rpb24nOiBjb2xsZWN0aW9uXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWFwKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRMYXllckRlZmF1bHRTdHlsZShsYXllcikge1xuICAgICAgICBsYXllci5zZXRTdHlsZSh0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1tsYXllci5mZWF0dXJlLnByb3BlcnRpZXMuX3MxXSB8fCBkZWZhdWx0T2JqZWN0U3R5bGUpXG4gICAgfVxuXG4gICAgc2V0TGF5ZXJIb3ZlclN0eWxlKGxheWVyKSB7XG4gICAgICAgIGxheWVyLnNldFN0eWxlKHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3Muc3R5bGVzW2xheWVyLmZlYXR1cmUucHJvcGVydGllcy5fczJdKVxuICAgIH1cblxuICAgIHNldExheWVyQWN0aXZlU3R5bGUobGF5ZXIpIHtcbiAgICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUxheWVyID0gbGF5ZXI7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuYWN0aXZlTGF5ZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlTGF5ZXIuYWRkVG8odGhpcy5tYXApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hY3RpdmVMYXllci5icmluZ1RvRnJvbnQoKTtcblxuICAgICAgICBzd2l0Y2ggKHRoaXMuYWN0aXZlTGF5ZXIuZmVhdHVyZS5nZW9tZXRyeS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdQb2ludCc6XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVMYXllci5zZXRTdHlsZSh0aGlzLm1hcFJlc3BvbnNlLnNldHRpbmdzLnN0eWxlc1snb25fZGlhbG9nX3BvaW50J10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnTXVsdGlMaW5lU3RyaW5nJzpcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZUxheWVyLnNldFN0eWxlKHRoaXMubWFwUmVzcG9uc2Uuc2V0dGluZ3Muc3R5bGVzWydvbl9kaWFsb2dfbGluZSddKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1BvbHlnb24nOlxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlTGF5ZXIuc2V0U3R5bGUodGhpcy5tYXBSZXNwb25zZS5zZXR0aW5ncy5zdHlsZXNbJ29uX2RpYWxvZ19wb2x5Z29uJ10pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2V0U3VydmV5KHZvdGVTdXJ2YXkpIHtcbiAgICAgICAgdGhpcy52b3RlU3VydmF5ID0gdm90ZVN1cnZheTtcbiAgICB9XG5cbiAgICBzZXRTdXJ2ZXlEYXRhKGxheWVyLCBldikge1xuICAgICAgICB0aGlzLnZvdGVTdXJ2YXkuc2V0TGF5ZXJEYXRhKGxheWVyLCBldik7XG4gICAgfVxuXG4gICAgLy8gY2xvc2VTdXJ2ZXkoKSA9PiB7XG4gICAgICAgIC8vIHBhdGhWb3RlU3VydmV5LmNsb3NlKCk7XG4gICAgLy8gfVxufTtcblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFzc2V0cy9mcm9udC9qcy9tYXAtbWFpbi5qcyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBOzs7QUFDQTtBQWFBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQU5BO0FBQ0E7QUFDQTtBQUhBO0FBT0E7QUFDQTtBQUNBOzs7QUFDQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFSQTtBQVVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVBBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBcENBO0FBQ0E7QUF1Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFwQ0E7QUFDQTtBQXNDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUNBO0FBSUE7QUFDQTs7O0FBRUE7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBOzs7QUFJQTs7O0FBSUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUVBO0FBQ0E7QUFIQTtBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQURBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBWkE7QUFjQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUhBO0FBT0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFGQTtBQUlBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTkE7QUFDQTtBQVFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUxBO0FBQ0E7QUFPQTtBQUNBO0FBREE7QUFHQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBUEE7QUFTQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVkE7QUFZQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBU0E7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUNBO0FBdUJBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFHQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUZBO0FBSUE7QUFDQTtBQUNBO0FBVEE7QUFXQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBVEE7QUFXQTs7O0FBRUE7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7QUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///2\n");

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n/*const mapBoxUrl = 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';*/\nvar mapBoxUrl = exports.mapBoxUrl = 'https://gradska-sreda.dreamradio.org/map/styles/vs/{z}/{x}/{y}.png';\nvar mapBoxAttribution = exports.mapBoxAttribution = '&copy <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors';\n\nvar defaultElConfig = exports.defaultElConfig = {\n    headerId: '#app-header',\n    elHeader: null\n};\n\nvar defaultObjectStyle = exports.defaultObjectStyle = {\n    color: \"#ff9710\",\n    opacity: 0.5,\n    width: 5,\n    mapActiveArea: {\n        position: 'absolute',\n        top: '0',\n        left: '0',\n        width: '100%',\n        height: '100%'\n    }\n};\n\nvar apiEndpoints = exports.apiEndpoints = {\n    geo: '/geo/'\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hc3NldHMvZnJvbnQvanMvbWFwLWNvbmZpZy5qcz8xNWU1Il0sInNvdXJjZXNDb250ZW50IjpbIi8qY29uc3QgbWFwQm94VXJsID0gJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJzsqL1xuZXhwb3J0IGNvbnN0IG1hcEJveFVybCA9ICdodHRwczovL2dyYWRza2Etc3JlZGEuZHJlYW1yYWRpby5vcmcvbWFwL3N0eWxlcy92cy97en0ve3h9L3t5fS5wbmcnO1xuZXhwb3J0IGNvbnN0IG1hcEJveEF0dHJpYnV0aW9uID0gYCZjb3B5IDxhIGhyZWY9XCJodHRwczovL3d3dy5vcGVuc3RyZWV0bWFwLm9yZy9jb3B5cmlnaHRcIj5PcGVuU3RyZWV0TWFwPC9hPiBjb250cmlidXRvcnNgO1xuXG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0RWxDb25maWcgPSB7XG4gICAgaGVhZGVySWQ6ICcjYXBwLWhlYWRlcicsXG4gICAgZWxIZWFkZXI6IG51bGwsXG59O1xuXG5leHBvcnQgY29uc3QgZGVmYXVsdE9iamVjdFN0eWxlID0ge1xuICAgIGNvbG9yOiBcIiNmZjk3MTBcIixcbiAgICBvcGFjaXR5OiAwLjUsXG4gICAgd2lkdGg6IDUsXG4gICAgbWFwQWN0aXZlQXJlYToge1xuICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgdG9wOiAnMCcsXG4gICAgICAgIGxlZnQ6ICcwJyxcbiAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGFwaUVuZHBvaW50cyA9IHtcbiAgICBnZW86ICcvZ2VvLydcbn07XG5cblxuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFzc2V0cy9mcm9udC9qcy9tYXAtY29uZmlnLmpzIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBRkE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBTEE7QUFKQTtBQUNBO0FBWUE7QUFDQTtBQURBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///3\n");

/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Survey = exports.Survey = function () {\n    // Precents  // TODO take form MapInstance \n    function Survey(mapInstance) {\n        _classCallCheck(this, Survey);\n\n        this.geoObjectUUID = '';\n        this.isOpen = false;\n        this.progress = 0;\n        this.questions = [];\n        this.results = {\n            rating: [{}],\n            respondents: [{}]\n        };\n        this.mapAreaHeight = 100;\n        this.mapAreaWidth = 100;\n        this.mapMarkerIcon = L.icon({\n            iconUrl: 'front/svg/icon--map-pin--edit.svg',\n            iconSize: [53.707, 53.707], // size of the icon\n            iconAnchor: [26.9, 53] // point of the icon which will correspond to marker's location\n        });\n\n        this.mapInstance = mapInstance;\n\n        this.queryElements();\n        this.events();\n    }\n\n    // UI\n    // Precents  // TODO take form MapInstance \n\n\n    _createClass(Survey, [{\n        key: 'queryElements',\n        value: function queryElements() {\n            this.elPathVoteSurveyContainer = document.getElementById('path-vote-suevey');\n            if (!this.elPathVoteSurveyContainer) {\n                throw 'Element \"#path-vote-suevey\" not found';\n            }\n            this.elProgressBar = this.elPathVoteSurveyContainer.querySelector('.survey-progress-bar');\n            this.elSurveayForm = this.elPathVoteSurveyContainer.querySelector('.survey-form');\n\n            this.elSurveyCarouselNav = this.elPathVoteSurveyContainer.querySelectorAll('.side-panel-nav-btn');\n            this.elSurveyPollBtn = this.elSurveyCarouselNav[1];\n            this.refSurveyCarousel = this.elPathVoteSurveyContainer.querySelectorAll('#carouselServeyPages');\n        }\n    }, {\n        key: 'events',\n        value: function events() {\n            var _this = this;\n\n            $(this.elSurveyCarouselNav).on('click', function (e) {\n                if (e.currentTarget.classList.contains('active')) {\n                    return false;\n                }\n                _this.elSurveyCarouselNav.forEach(function (navItem) {\n                    navItem.classList.remove('active');\n                });\n                e.currentTarget.classList.add('active');\n            });\n\n            $(document).on('click', '[data-toggle-for=\"path-vote-suevey\"][data-toggle-open]', function () {\n                _this.open(_this.layer, _this.ev);\n            });\n\n            $(document).on('click', '[data-toggle-for=\"path-vote-suevey\"][data-toggle-close]', function () {\n                _this.close();\n            });\n\n            $(this.elPathVoteSurveyContainer.querySelector('.answer')).on('input propertychange', function (e) {\n                var target = e.target;\n                var data = {};\n                var debounceTime = 0;\n\n                if (target.tagName === 'TEXTAREA') {\n                    data = {\n                        'explanation': {\n                            \"answer\": target.id,\n                            \"text\": target.value\n                        }\n                    };\n\n                    debounceTime = 400;\n                } else {\n                    data = {\n                        'answer': target.value\n                    };\n                }\n\n                clearTimeout(_this.timeoutId);\n\n                _this.timeoutId = setTimeout(function () {\n                    _this.submitSurvey(data, target.value);\n                }, debounceTime);\n            });\n\n            $(document).on('click', '.rem', function () {\n                var value = _this.value;\n                $.ajax({\n                    type: \"POST\",\n                    url: '/geo/' + _this.geoObjectUUID + '/clear/' + value,\n                    success: function success() {\n                        _this.getQuestions();\n                        _this.getResults();\n                    }\n                });\n            });\n        }\n    }, {\n        key: 'getQuestions',\n        value: function getQuestions() {\n            var _this2 = this;\n\n            $.ajax({\n                url: 'front-end/geo/' + this.geoObjectUUID,\n                success: function success(result) {\n                    _this2.buildSurvey(result);\n                }\n            });\n        }\n    }, {\n        key: 'getResults',\n        value: function getResults() {\n            var _this3 = this;\n\n            $.ajax({\n                url: 'front-end/geo/' + this.geoObjectUUID + '/result',\n                success: function success(result) {\n                    _this3.buildResults(result);\n                }\n            });\n        }\n    }, {\n        key: 'submitSurvey',\n        value: function submitSurvey(data, value) {\n            var _this4 = this;\n\n            $.ajax({\n                type: 'POST',\n                url: '/geo/' + this.geoObjectUUID + '/q',\n                data: data,\n                beforeSend: function beforeSend() {\n                    if (document.getElementById(value)) {\n                        document.getElementById(value).style.color = 'green';\n                    }\n                },\n                success: function success(result) {\n                    _this4.buildSurvey(result);\n                }\n            });\n        }\n    }, {\n        key: 'buildResults',\n        value: function buildResults(result) {\n            var _this5 = this;\n\n            var ratingHTML = '';\n            var respondentsHTML = '';\n            var isSelectedParent = false;\n            this.results.rating = result.rating;\n            this.results.respondents = result.respondents;\n\n            this.results.rating.forEach(function (ratingItem) {\n                ratingHTML += '\\n                <div class=\"row\">\\n                    <div class=\"col-lg-6 text-right\">' + ratingItem.criterion + '</div>\\n                    <div class=\"col-lg-6\">\\n                        <div class=\"progress mb-4\">\\n                            <div class=\"progress-bar pt-1\" role=\"progressbar\" style=\"width: ' + ratingItem.percentage + '%;\"\\n                                aria-valuenow=\"' + ratingItem.percentage + '\" aria-valuemin=\"0\"\\n                                aria-valuemax=\"100\">' + ratingItem.rating + ' / ' + ratingItem.max + '</div>\\n                        </div>\\n                    </div>\\n                </div>';\n            });\n\n            document.querySelector('.survey-ratings-rating').innerHTML = ratingHTML;\n\n            Object.keys(this.results.respondents).forEach(function (respondentUser) {\n                respondentsHTML += '<strong>' + respondentUser + '</strong>';\n\n                _this5.results.respondents[respondentUser].forEach(function (respondentItem) {\n                    respondentsHTML += '\\n                    <div class=\"row\">\\n                        <div class=\"col-lg-6 text-right\">' + respondentItem.criterion + '</div>\\n                        <div class=\"col-lg-6\">\\n                            <div class=\"progress mb-4\">\\n                                <div class=\"progress-bar pt-1\" role=\"progressbar\" style=\"width: ' + respondentItem.percentage + '%;\"\\n                                     aria-valuenow=\"' + respondentItem.percentage + '\" aria-valuemin=\"0\"\\n                                     aria-valuemax=\"100\">' + respondentItem.rating + ' / ' + respondentItem.max + '</div>\\n                            </div>\\n                        </div>\\n                    </div>';\n                });\n            });\n\n            document.querySelector('.survey-ratings-respondents').innerHTML = ratingHTML;\n        }\n    }, {\n        key: 'buildSurvey',\n        value: function buildSurvey(result) {\n            var _this6 = this;\n\n            var html = '';\n            var isSelectedParent = false;\n            this.progress = result.survey.progress;\n            this.questions = result.survey.questions;\n\n            Object.keys(this.questions).forEach(function (item) {\n                var answers = _this6.questions[item].answers;\n                _this6.question = _this6.questions[item];\n\n                html += '<div class=\"survey-question mb-4\">\\n                        <div class=\"survey-question-title  mb-1\">\\n                            <i class=\"mr-1 fas ' + (_this6.question.isAnswered ? 'text-success fa-check' : 'fa-check text-black-50') + '\"></i>\\n                            <h5 class=\"survey-question-title-text d-inline\">' + _this6.question.title + '</h5>\\n                        </div>\\n                        <div class=\"survey-question pl-4\">';\n\n                Object.keys(answers).forEach(function (answer) {\n                    if (answers[answer].parent === null) {\n                        isSelectedParent = _this6.question.answers[answer].isSelected;\n\n                        html += '<div class=\"d-flex flex-column\">\\n                                <label class=\"survey-question-option ' + (answers[answer].isSelected ? 'is-answered' : '') + '\" id=\"' + answers[answer].uuid + '\">\\n                                    <input class=\"mr-1 answer\" type=\"' + (_this6.question.hasMultipleAnswers ? 'checkbox' : 'radio') + '\" name=\"answers[option][' + _this6.question.uuid + '][]\"\\n                                    ' + (answers[answer].isSelected ? 'checked=\"checked\"' : '') + ' value=\"' + answers[answer].uuid + '\" /> ' + answers[answer].title + '\\n                                </label>\\n                            </div>';\n\n                        if (_this6.question.answers[answer].isFreeAnswer) {\n                            html += '<textarea class=\"answer\"></textarea>';\n                        }\n                    } else {\n                        if (isSelectedParent === true) {\n                            html += '<div class=\"pl-4 d-flex flex-column\">\\n                                    <label class=\"survey-question-option ' + (answers[answer].isSelected ? 'is-answered' : '') + '\" id=\"' + answers[answer].uuid + '\">\\n                                        <input class=\"mr-1  answer\" type=\"checkbox\" name=\"answers[option][' + _this6.question.uuid + ('][]\" ' + (answers[answer].isSelected ? 'checked=\"checked\"' : '') + ' value=\"' + answers[answer].uuid + '\" />\\n                                        ') + answers[answer].title + '</label>';\n\n                            if (answers[answer].isSelected && _this6.question.answers[answer].isFreeAnswer) {\n                                html += '<label class=\"' + (answers[answer].isSelected ? 'is-answered' : '') + '\">\\n                                        <textarea class=\"answer d-block\" id=\"textarea-' + _this6.question.answers[answer].uuid + ']\">' + _this6.question.answers[answer].explanation + '</textarea>\\n                                    </label>';\n                            }\n\n                            html += '</div>';\n                        }\n                    }\n                });\n\n                if (_this6.question.isAnswered) {\n                    html += '<div class=\"d-flex justify-content-end\">\\n                            <button type=\"button\" class=\"rem btn btn-sm btn-danger\" name=\"answers[option][' + _this6.question.uuid + '][]\" value=\"' + _this6.question.uuid + '\">\\u0418\\u0437\\u0447\\u0438\\u0441\\u0442\\u0438</button>\\n                        </div>';\n                }\n\n                html += '\\n                        </div>\\n                    </div>\\n                    ';\n            });\n\n            this.elSurveayForm.innerHTML = html;\n\n            this.elProgressBar.style.width = this.progress.percentage + '%';\n\n            if (this.progress.percentage === 100) {\n                this.elSurveyPollBtn.classList.remove('disabled');\n                $(this.elSurveyPollBtn).parent().tooltip('disable');\n            } else {\n                this.elSurveyPollBtn.classList.add('disabled');\n                $(this.elSurveyPollBtn).parent().tooltip('enable');\n            }\n        }\n    }, {\n        key: 'setLayerData',\n        value: function setLayerData(layer, ev) {\n            this.layer = layer;\n            this.event = ev;\n            this.geoObjectUUID = this.layer.feature.properties.id;\n            this.getQuestions();\n            this.getResults();\n        }\n    }, {\n        key: 'addMarker',\n        value: function addMarker() {\n            this.removeMarker();\n            this.mapMarker = L.marker(this.layer.getCenter(), {\n                icon: this.mapMarkerIcon\n            });\n            this.mapMarker.addTo(this.mapInstance.map);\n        }\n    }, {\n        key: 'removeMarker',\n        value: function removeMarker() {\n            if (this.mapMarker) {\n                this.mapMarker.remove();\n            }\n        }\n    }, {\n        key: 'open',\n        value: function open(layer, ev) {\n            this.isOpen = true;\n            this.mapInstance.map.closePopup();\n            this.mapInstance.setLayerActiveStyle(this.layer);\n            this.addMarker();\n\n            if (layer && ev) {\n                this.setLayerData(layer, ev);\n            }\n\n            this.elPathVoteSurveyContainer.querySelector('.geo-object-name').textContent = this.layer.feature.properties.name;\n            this.elPathVoteSurveyContainer.querySelector('.geo-object-type').textContent = this.layer.feature.properties.type;\n\n            this.lastCenterPoint = this.event.latlng;\n            var surveyHeight = parseFloat(getComputedStyle(this.elPathVoteSurveyContainer).getPropertyValue('--side-panel-height'));\n            var activeAreaHeight = this.mapAreaHeight - surveyHeight;\n\n            var surveyWidth = parseFloat(getComputedStyle(this.elPathVoteSurveyContainer).getPropertyValue('--suevey-width'));\n            var activeAreaWidth = this.mapAreaWidth - surveyWidth;\n\n            this.mapInstance.toggleHeaderEl(false);\n            this.mapInstance.map.setActiveArea({\n                height: activeAreaHeight + '%',\n                width: activeAreaWidth + '%',\n                top: 0,\n                bottom: 0\n            });\n\n            this.mapInstance.zoomToLayer(this.layer, this.event, this.layer.getCenter());\n        }\n    }, {\n        key: 'close',\n        value: function close() {\n            this.isOpen = false;\n            this.removeMarker();\n\n            this.mapInstance.toggleHeaderEl(true);\n\n            this.mapInstance.map.setActiveArea(_defineProperty({\n                height: this.mapAreaHeight + '%'\n            }, 'height', this.mapAreaHeight + '%'));\n            this.mapInstance.map.panTo(this.lastCenterPoint);\n        }\n    }]);\n\n    return Survey;\n}();\n\n;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hc3NldHMvZnJvbnQvanMvc3VydmV5LmpzPzU1NTMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIFN1cnZleSB7XG4gICAgbWFwSW5zdGFuY2U7XG4gICAgbGF5ZXI7XG4gICAgZ2VvT2JqZWN0VVVJRCA9ICcnOyBcbiAgICBpc09wZW4gPSBmYWxzZTtcbiAgICBsYXN0Q2VudGVyUG9pbnQ7XG4gICAgbWFwTWFya2VyO1xuXG4gICAgdGltZW91dElkO1xuICAgIHByb2dyZXNzID0gMDtcbiAgICBxdWVzdGlvbnMgPSBbXTtcbiAgICByZXN1bHRzID0ge1xuICAgICAgICByYXRpbmc6IFt7fV0sXG4gICAgICAgIHJlc3BvbmRlbnRzOiBbe31dXG4gICAgfTtcblxuICAgIG1hcEFyZWFIZWlnaHQgPSAxMDA7IC8vIFByZWNlbnRzICAvLyBUT0RPIHRha2UgZm9ybSBNYXBJbnN0YW5jZSBcbiAgICBtYXBBcmVhV2lkdGggPSAxMDA7IC8vIFByZWNlbnRzICAvLyBUT0RPIHRha2UgZm9ybSBNYXBJbnN0YW5jZSBcbiAgICBtYXBNYXJrZXJJY29uID0gTC5pY29uKHtcbiAgICAgICAgaWNvblVybDogJ2Zyb250L3N2Zy9pY29uLS1tYXAtcGluLS1lZGl0LnN2ZycsXG4gICAgICAgIGljb25TaXplOiAgICAgWzUzLjcwNywgNTMuNzA3XSwgLy8gc2l6ZSBvZiB0aGUgaWNvblxuICAgICAgICBpY29uQW5jaG9yOiAgIFsyNi45LCA1M10sIC8vIHBvaW50IG9mIHRoZSBpY29uIHdoaWNoIHdpbGwgY29ycmVzcG9uZCB0byBtYXJrZXIncyBsb2NhdGlvblxuICAgIH0pO1xuXG4gICAgLy8gVUlcbiAgICBldmVudDtcbiAgICBlbFBhdGhWb3RlU3VydmV5Q29udGFpbmVyO1xuICAgIGVsUHJvZ3Jlc3NCYXI7XG4gICAgZWxTdXJ2ZWF5Rm9ybTtcbiAgICBlbFN1cnZleUNhcm91c2VsTmF2O1xuICAgIGVsU3VydmV5UG9sbEJ0bjtcbiAgICByZWZTdXJ2ZXlDYXJvdXNlbDtcblxuICAgIGNvbnN0cnVjdG9yKG1hcEluc3RhbmNlKSB7XG4gICAgICAgIHRoaXMubWFwSW5zdGFuY2UgPSBtYXBJbnN0YW5jZTtcbiAgICAgIFxuXG4gICAgICAgIHRoaXMucXVlcnlFbGVtZW50cygpO1xuICAgICAgICB0aGlzLmV2ZW50cygpO1xuICAgIH1cblxuICAgIHF1ZXJ5RWxlbWVudHMoKSB7XG4gICAgICAgIHRoaXMuZWxQYXRoVm90ZVN1cnZleUNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwYXRoLXZvdGUtc3VldmV5Jyk7XG4gICAgICAgIGlmICghdGhpcy5lbFBhdGhWb3RlU3VydmV5Q29udGFpbmVyKSB7XG4gICAgICAgICAgIHRocm93ICdFbGVtZW50IFwiI3BhdGgtdm90ZS1zdWV2ZXlcIiBub3QgZm91bmQnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWxQcm9ncmVzc0JhciA9IHRoaXMuZWxQYXRoVm90ZVN1cnZleUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3VydmV5LXByb2dyZXNzLWJhcicpO1xuICAgICAgICB0aGlzLmVsU3VydmVheUZvcm0gPSB0aGlzLmVsUGF0aFZvdGVTdXJ2ZXlDb250YWluZXIucXVlcnlTZWxlY3RvcignLnN1cnZleS1mb3JtJyk7XG4gICAgICAgICAgXG4gICAgICAgIHRoaXMuZWxTdXJ2ZXlDYXJvdXNlbE5hdiA9IHRoaXMuZWxQYXRoVm90ZVN1cnZleUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZS1wYW5lbC1uYXYtYnRuJyk7XG4gICAgICAgIHRoaXMuZWxTdXJ2ZXlQb2xsQnRuID0gdGhpcy5lbFN1cnZleUNhcm91c2VsTmF2WzFdO1xuICAgICAgICB0aGlzLnJlZlN1cnZleUNhcm91c2VsID0gdGhpcy5lbFBhdGhWb3RlU3VydmV5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJyNjYXJvdXNlbFNlcnZleVBhZ2VzJyk7XG4gICAgfVxuXG4gICAgZXZlbnRzKCkge1xuICAgICAgICAkKHRoaXMuZWxTdXJ2ZXlDYXJvdXNlbE5hdikub24oJ2NsaWNrJywgKGUpID0+IHtcbiAgICAgICAgICAgIGlmIChlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuZWxTdXJ2ZXlDYXJvdXNlbE5hdi5mb3JFYWNoKChuYXZJdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgbmF2SXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtdG9nZ2xlLWZvcj1cInBhdGgtdm90ZS1zdWV2ZXlcIl1bZGF0YS10b2dnbGUtb3Blbl0nLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wZW4odGhpcy5sYXllciwgdGhpcy5ldik7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJ1tkYXRhLXRvZ2dsZS1mb3I9XCJwYXRoLXZvdGUtc3VldmV5XCJdW2RhdGEtdG9nZ2xlLWNsb3NlXScsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCh0aGlzLmVsUGF0aFZvdGVTdXJ2ZXlDb250YWluZXIucXVlcnlTZWxlY3RvcignLmFuc3dlcicpKS5vbignaW5wdXQgcHJvcGVydHljaGFuZ2UnLCAoZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IHt9O1xuICAgICAgICAgICAgbGV0IGRlYm91bmNlVGltZSA9IDA7XG4gICAgXG4gICAgICAgICAgICBpZiAodGFyZ2V0LnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgICAgICAgICAgICBkYXRhID0ge1xuICAgICAgICAgICAgICAgICAgICAnZXhwbGFuYXRpb24nOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcImFuc3dlclwiOiB0YXJnZXQuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInRleHRcIjogdGFyZ2V0LnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICBcbiAgICAgICAgICAgICAgICBkZWJvdW5jZVRpbWUgPSA0MDA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB7XG4gICAgICAgICAgICAgICAgICAgICdhbnN3ZXInOiB0YXJnZXQudmFsdWUsXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lb3V0SWQpOyBcbiAgICBcbiAgICAgICAgICAgIHRoaXMudGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJtaXRTdXJ2ZXkoZGF0YSwgdGFyZ2V0LnZhbHVlKVxuICAgICAgICAgICAgfSwgZGVib3VuY2VUaW1lKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5yZW0nLCAoKSA9PiB7XG4gICAgICAgICAgICBsZXQgdmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICB1cmw6ICcvZ2VvLycgKyB0aGlzLmdlb09iamVjdFVVSUQgKyAnL2NsZWFyLycgKyB2YWx1ZSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UXVlc3Rpb25zKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0UmVzdWx0cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRRdWVzdGlvbnMoKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICdmcm9udC1lbmQvZ2VvLycgKyB0aGlzLmdlb09iamVjdFVVSUQsXG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICB0aGlzLmJ1aWxkU3VydmV5KHJlc3VsdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGdldFJlc3VsdHMoKSB7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICdmcm9udC1lbmQvZ2VvLycgKyB0aGlzLmdlb09iamVjdFVVSUQgKyAnL3Jlc3VsdCcsXG4gICAgICAgICAgICBzdWNjZXNzOiAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgICAgICB0aGlzLmJ1aWxkUmVzdWx0cyhyZXN1bHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBzdWJtaXRTdXJ2ZXkoZGF0YSwgdmFsdWUpIHtcbiAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIHVybDogJy9nZW8vJyArIHRoaXMuZ2VvT2JqZWN0VVVJRCArICcvcScsXG4gICAgICAgICAgICBkYXRhOiBkYXRhLFxuICAgICAgICAgICAgYmVmb3JlU2VuZDogKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodmFsdWUpLnN0eWxlLmNvbG9yID0gJ2dyZWVuJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogKHJlc3VsdCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYnVpbGRTdXJ2ZXkocmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIGJ1aWxkUmVzdWx0cyhyZXN1bHQpIHtcbiAgICAgICAgbGV0IHJhdGluZ0hUTUwgPSBgYDtcbiAgICAgICAgbGV0IHJlc3BvbmRlbnRzSFRNTCA9IGBgO1xuICAgICAgICBsZXQgaXNTZWxlY3RlZFBhcmVudCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJlc3VsdHMucmF0aW5nID0gcmVzdWx0LnJhdGluZztcbiAgICAgICAgdGhpcy5yZXN1bHRzLnJlc3BvbmRlbnRzID0gcmVzdWx0LnJlc3BvbmRlbnRzO1xuXG4gICAgICAgdGhpcy5yZXN1bHRzLnJhdGluZy5mb3JFYWNoKChyYXRpbmdJdGVtKSA9PiB7XG4gICAgICAgICAgICByYXRpbmdIVE1MICs9IGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtbGctNiB0ZXh0LXJpZ2h0XCI+JHtyYXRpbmdJdGVtLmNyaXRlcmlvbn08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MgbWItNFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwcm9ncmVzcy1iYXIgcHQtMVwiIHJvbGU9XCJwcm9ncmVzc2JhclwiIHN0eWxlPVwid2lkdGg6ICR7cmF0aW5nSXRlbS5wZXJjZW50YWdlfSU7XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS12YWx1ZW5vdz1cIiR7cmF0aW5nSXRlbS5wZXJjZW50YWdlfVwiIGFyaWEtdmFsdWVtaW49XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJpYS12YWx1ZW1heD1cIjEwMFwiPiR7cmF0aW5nSXRlbS5yYXRpbmd9IC8gJHtyYXRpbmdJdGVtLm1heH08L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VydmV5LXJhdGluZ3MtcmF0aW5nJykuaW5uZXJIVE1MID0gcmF0aW5nSFRNTDtcblxuXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMucmVzdWx0cy5yZXNwb25kZW50cykuZm9yRWFjaCgocmVzcG9uZGVudFVzZXIpID0+IHtcbiAgICAgICAgICAgIHJlc3BvbmRlbnRzSFRNTCArPSBgPHN0cm9uZz4ke3Jlc3BvbmRlbnRVc2VyfTwvc3Ryb25nPmA7XG5cbiAgICAgICAgICAgIHRoaXMucmVzdWx0cy5yZXNwb25kZW50c1tyZXNwb25kZW50VXNlcl0uZm9yRWFjaCgocmVzcG9uZGVudEl0ZW0pID0+IHtcbiAgICAgICAgICAgICAgICByZXNwb25kZW50c0hUTUwgKz0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLWxnLTYgdGV4dC1yaWdodFwiPiR7cmVzcG9uZGVudEl0ZW0uY3JpdGVyaW9ufTwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1sZy02XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzIG1iLTRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByb2dyZXNzLWJhciBwdC0xXCIgcm9sZT1cInByb2dyZXNzYmFyXCIgc3R5bGU9XCJ3aWR0aDogJHtyZXNwb25kZW50SXRlbS5wZXJjZW50YWdlfSU7XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXZhbHVlbm93PVwiJHtyZXNwb25kZW50SXRlbS5wZXJjZW50YWdlfVwiIGFyaWEtdmFsdWVtaW49XCIwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmlhLXZhbHVlbWF4PVwiMTAwXCI+JHtyZXNwb25kZW50SXRlbS5yYXRpbmd9IC8gJHtyZXNwb25kZW50SXRlbS5tYXh9PC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+YDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VydmV5LXJhdGluZ3MtcmVzcG9uZGVudHMnKS5pbm5lckhUTUwgPSByYXRpbmdIVE1MO1xuXG4gICAgfVxuXG4gICAgYnVpbGRTdXJ2ZXkocmVzdWx0KSB7XG4gICAgICAgIGxldCBodG1sID0gYGA7XG4gICAgICAgIGxldCBpc1NlbGVjdGVkUGFyZW50ID0gZmFsc2U7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MgPSByZXN1bHQuc3VydmV5LnByb2dyZXNzO1xuICAgICAgICB0aGlzLnF1ZXN0aW9ucyA9IHJlc3VsdC5zdXJ2ZXkucXVlc3Rpb25zO1xuXG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMucXVlc3Rpb25zKS5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhbnN3ZXJzID0gdGhpcy5xdWVzdGlvbnNbaXRlbV0uYW5zd2VycztcbiAgICAgICAgICAgIHRoaXMucXVlc3Rpb24gPSB0aGlzLnF1ZXN0aW9uc1tpdGVtXTtcblxuICAgICAgICAgICAgaHRtbCArPSBgPGRpdiBjbGFzcz1cInN1cnZleS1xdWVzdGlvbiBtYi00XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VydmV5LXF1ZXN0aW9uLXRpdGxlICBtYi0xXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGkgY2xhc3M9XCJtci0xIGZhcyBgICsgKHRoaXMucXVlc3Rpb24uaXNBbnN3ZXJlZCA/ICd0ZXh0LXN1Y2Nlc3MgZmEtY2hlY2snIDogJ2ZhLWNoZWNrIHRleHQtYmxhY2stNTAnKSArIGBcIj48L2k+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg1IGNsYXNzPVwic3VydmV5LXF1ZXN0aW9uLXRpdGxlLXRleHQgZC1pbmxpbmVcIj5gICsgdGhpcy5xdWVzdGlvbi50aXRsZSArIGA8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3VydmV5LXF1ZXN0aW9uIHBsLTRcIj5gO1xuXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhhbnN3ZXJzKS5mb3JFYWNoKChhbnN3ZXIpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoYW5zd2Vyc1thbnN3ZXJdLnBhcmVudCA9PT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBpc1NlbGVjdGVkUGFyZW50ID0gdGhpcy5xdWVzdGlvbi5hbnN3ZXJzW2Fuc3dlcl0uaXNTZWxlY3RlZDtcblxuICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwiZC1mbGV4IGZsZXgtY29sdW1uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInN1cnZleS1xdWVzdGlvbi1vcHRpb24gYCArIChhbnN3ZXJzW2Fuc3dlcl0uaXNTZWxlY3RlZCA/ICdpcy1hbnN3ZXJlZCcgOiAnJykgKyBgXCIgaWQ9XCJgICsgYW5zd2Vyc1thbnN3ZXJdLnV1aWQgKyBgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgY2xhc3M9XCJtci0xIGFuc3dlclwiIHR5cGU9XCJgICsgKHRoaXMucXVlc3Rpb24uaGFzTXVsdGlwbGVBbnN3ZXJzID8gJ2NoZWNrYm94JyA6ICdyYWRpbycpICsgYFwiIG5hbWU9XCJhbnN3ZXJzW29wdGlvbl1bYCArIHRoaXMucXVlc3Rpb24udXVpZCArIGBdW11cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYCArIChhbnN3ZXJzW2Fuc3dlcl0uaXNTZWxlY3RlZCA/ICdjaGVja2VkPVwiY2hlY2tlZFwiJyA6ICcnKSArIGAgdmFsdWU9XCJgICsgYW5zd2Vyc1thbnN3ZXJdLnV1aWQgKyBgXCIgLz4gYCArIGFuc3dlcnNbYW5zd2VyXS50aXRsZSArIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmFuc3dlcnNbYW5zd2VyXS5pc0ZyZWVBbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGh0bWwgKz0gYDx0ZXh0YXJlYSBjbGFzcz1cImFuc3dlclwiPjwvdGV4dGFyZWE+YDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1NlbGVjdGVkUGFyZW50ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwicGwtNCBkLWZsZXggZmxleC1jb2x1bW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cInN1cnZleS1xdWVzdGlvbi1vcHRpb24gYCArIChhbnN3ZXJzW2Fuc3dlcl0uaXNTZWxlY3RlZCA/ICdpcy1hbnN3ZXJlZCcgOiAnJykgKyBgXCIgaWQ9XCJgICsgYW5zd2Vyc1thbnN3ZXJdLnV1aWQgKyBgXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGNsYXNzPVwibXItMSAgYW5zd2VyXCIgdHlwZT1cImNoZWNrYm94XCIgbmFtZT1cImFuc3dlcnNbb3B0aW9uXVtgICsgdGhpcy5xdWVzdGlvbi51dWlkICsgYF1bXVwiICR7KGFuc3dlcnNbYW5zd2VyXS5pc1NlbGVjdGVkID8gJ2NoZWNrZWQ9XCJjaGVja2VkXCInIDogJycpfSB2YWx1ZT1cIiR7YW5zd2Vyc1thbnN3ZXJdLnV1aWR9XCIgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgICsgYW5zd2Vyc1thbnN3ZXJdLnRpdGxlICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGA8L2xhYmVsPmA7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhbnN3ZXJzW2Fuc3dlcl0uaXNTZWxlY3RlZCAmJiB0aGlzLnF1ZXN0aW9uLmFuc3dlcnNbYW5zd2VyXS5pc0ZyZWVBbnN3ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9IGA8bGFiZWwgY2xhc3M9XCJgICsgKGFuc3dlcnNbYW5zd2VyXS5pc1NlbGVjdGVkID8gJ2lzLWFuc3dlcmVkJyA6ICcnKSArIGBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dGFyZWEgY2xhc3M9XCJhbnN3ZXIgZC1ibG9ja1wiIGlkPVwidGV4dGFyZWEtYCArIHRoaXMucXVlc3Rpb24uYW5zd2Vyc1thbnN3ZXJdLnV1aWQgKyBgXVwiPmAgKyB0aGlzLnF1ZXN0aW9uLmFuc3dlcnNbYW5zd2VyXS5leHBsYW5hdGlvbiArIGA8L3RleHRhcmVhPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9sYWJlbD5gO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sICs9ICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnF1ZXN0aW9uLmlzQW5zd2VyZWQpIHtcbiAgICAgICAgICAgICAgICBodG1sICs9IGA8ZGl2IGNsYXNzPVwiZC1mbGV4IGp1c3RpZnktY29udGVudC1lbmRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cInJlbSBidG4gYnRuLXNtIGJ0bi1kYW5nZXJcIiBuYW1lPVwiYW5zd2Vyc1tvcHRpb25dW2AgKyB0aGlzLnF1ZXN0aW9uLnV1aWQgKyBgXVtdXCIgdmFsdWU9XCJgICsgdGhpcy5xdWVzdGlvbi51dWlkICsgYFwiPtCY0LfRh9C40YHRgtC4PC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBodG1sICs9IGBcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgYDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5lbFN1cnZlYXlGb3JtLmlubmVySFRNTCA9IGh0bWw7XG5cbiAgICAgICAgdGhpcy5lbFByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gdGhpcy5wcm9ncmVzcy5wZXJjZW50YWdlICsgJyUnO1xuXG4gICAgICAgIGlmICh0aGlzLnByb2dyZXNzLnBlcmNlbnRhZ2UgPT09IDEwMCkge1xuICAgICAgICAgICAgdGhpcy5lbFN1cnZleVBvbGxCdG4uY2xhc3NMaXN0LnJlbW92ZSgnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgICQodGhpcy5lbFN1cnZleVBvbGxCdG4pLnBhcmVudCgpLnRvb2x0aXAoJ2Rpc2FibGUnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZWxTdXJ2ZXlQb2xsQnRuLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICAkKHRoaXMuZWxTdXJ2ZXlQb2xsQnRuKS5wYXJlbnQoKS50b29sdGlwKCdlbmFibGUnKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldExheWVyRGF0YShsYXllciwgZXYpIHtcbiAgICAgICAgdGhpcy5sYXllciA9IGxheWVyO1xuICAgICAgICB0aGlzLmV2ZW50ID0gZXY7XG4gICAgICAgIHRoaXMuZ2VvT2JqZWN0VVVJRCA9IHRoaXMubGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLmlkO1xuICAgICAgICB0aGlzLmdldFF1ZXN0aW9ucygpO1xuICAgICAgICB0aGlzLmdldFJlc3VsdHMoKTtcbiAgICB9XG5cbiAgICBhZGRNYXJrZXIoKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlTWFya2VyKCk7XG4gICAgICAgIHRoaXMubWFwTWFya2VyID0gTC5tYXJrZXIodGhpcy5sYXllci5nZXRDZW50ZXIoKSwge1xuICAgICAgICAgICAgaWNvbjogdGhpcy5tYXBNYXJrZXJJY29uXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLm1hcE1hcmtlci5hZGRUbyh0aGlzLm1hcEluc3RhbmNlLm1hcCk7XG4gICAgfVxuXG4gICAgcmVtb3ZlTWFya2VyKCkge1xuICAgICAgICBpZiAodGhpcy5tYXBNYXJrZXIpIHtcbiAgICAgICAgICAgIHRoaXMubWFwTWFya2VyLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb3BlbihsYXllciwgZXYpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICB0aGlzLm1hcEluc3RhbmNlLm1hcC5jbG9zZVBvcHVwKCk7XG4gICAgICAgIHRoaXMubWFwSW5zdGFuY2Uuc2V0TGF5ZXJBY3RpdmVTdHlsZSh0aGlzLmxheWVyKTtcbiAgICAgICAgdGhpcy5hZGRNYXJrZXIoKTtcblxuICAgICAgICBpZiAobGF5ZXIgJiYgZXYpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0TGF5ZXJEYXRhKGxheWVyLCBldik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsUGF0aFZvdGVTdXJ2ZXlDb250YWluZXIucXVlcnlTZWxlY3RvcignLmdlby1vYmplY3QtbmFtZScpLnRleHRDb250ZW50ID0gdGhpcy5sYXllci5mZWF0dXJlLnByb3BlcnRpZXMubmFtZTtcbiAgICAgICAgdGhpcy5lbFBhdGhWb3RlU3VydmV5Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5nZW8tb2JqZWN0LXR5cGUnKS50ZXh0Q29udGVudCA9IHRoaXMubGF5ZXIuZmVhdHVyZS5wcm9wZXJ0aWVzLnR5cGU7XG5cbiAgICAgICAgdGhpcy5sYXN0Q2VudGVyUG9pbnQgPSB0aGlzLmV2ZW50LmxhdGxuZztcbiAgICAgICAgY29uc3Qgc3VydmV5SGVpZ2h0ID0gcGFyc2VGbG9hdChnZXRDb21wdXRlZFN0eWxlKHRoaXMuZWxQYXRoVm90ZVN1cnZleUNvbnRhaW5lcikuZ2V0UHJvcGVydHlWYWx1ZSgnLS1zaWRlLXBhbmVsLWhlaWdodCcpKTtcbiAgICAgICAgY29uc3QgYWN0aXZlQXJlYUhlaWdodCA9IHRoaXMubWFwQXJlYUhlaWdodCAtIHN1cnZleUhlaWdodDtcblxuICAgICAgICBjb25zdCBzdXJ2ZXlXaWR0aCA9IHBhcnNlRmxvYXQoZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsUGF0aFZvdGVTdXJ2ZXlDb250YWluZXIpLmdldFByb3BlcnR5VmFsdWUoJy0tc3VldmV5LXdpZHRoJykpO1xuICAgICAgICBjb25zdCBhY3RpdmVBcmVhV2lkdGggPSB0aGlzLm1hcEFyZWFXaWR0aCAtIHN1cnZleVdpZHRoO1xuXG4gICAgICAgIHRoaXMubWFwSW5zdGFuY2UudG9nZ2xlSGVhZGVyRWwoZmFsc2UpO1xuICAgICAgICB0aGlzLm1hcEluc3RhbmNlLm1hcC5zZXRBY3RpdmVBcmVhKHtcbiAgICAgICAgICAgIGhlaWdodDogYWN0aXZlQXJlYUhlaWdodCArICclJyxcbiAgICAgICAgICAgIHdpZHRoOiBhY3RpdmVBcmVhV2lkdGggKyAnJScsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMubWFwSW5zdGFuY2Uuem9vbVRvTGF5ZXIodGhpcy5sYXllciwgdGhpcy5ldmVudCwgdGhpcy5sYXllci5nZXRDZW50ZXIoKSk7XG5cbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZW1vdmVNYXJrZXIoKTtcblxuICAgICAgICB0aGlzLm1hcEluc3RhbmNlLnRvZ2dsZUhlYWRlckVsKHRydWUpO1xuXG4gICAgICAgIHRoaXMubWFwSW5zdGFuY2UubWFwLnNldEFjdGl2ZUFyZWEoe1xuICAgICAgICAgICAgaGVpZ2h0OiB0aGlzLm1hcEFyZWFIZWlnaHQgKyAnJScsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMubWFwQXJlYUhlaWdodCArICclJyxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFwSW5zdGFuY2UubWFwLnBhblRvKHRoaXMubGFzdENlbnRlclBvaW50KTtcbiAgICB9XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIGFzc2V0cy9mcm9udC9qcy9zdXJ2ZXkuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBO0FBaUJBO0FBZ0JBO0FBQUE7QUFDQTtBQURBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFyQkE7QUFDQTtBQUZBO0FBc0JBO0FBQUE7QUFBQTtBQWRBO0FBQ0E7QUFDQTtBQUhBO0FBQ0E7QUFlQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFoQkE7QUFSQTtBQUNBO0FBQ0E7OztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBRkE7QUFEQTtBQUNBO0FBTUE7QUFDQTtBQUNBO0FBQ0E7QUFEQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU5BO0FBUUE7QUFDQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBTUE7OztBQUVBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFKQTtBQU1BOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFYQTtBQWFBOzs7QUFFQTtBQUFBO0FBQ0E7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBV0E7QUFDQTtBQUNBO0FBQ0E7QUFFQTs7O0FBRUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBS0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUdBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBO0FBQ0E7QUFNQTtBQUVBOzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBREE7QUFJQTtBQUNBOzs7Ozs7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///4\n");

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";
eval("\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Collections = exports.Collections = function () {\n    function Collections(mapInstance) {\n        _classCallCheck(this, Collections);\n\n        this.mapInstance = mapInstance;\n\n        this.init();\n    }\n\n    _createClass(Collections, [{\n        key: 'init',\n        value: function init() {\n            this.getGeoCollectionsList();\n        }\n    }, {\n        key: 'getGeoCollectionsList',\n        value: function getGeoCollectionsList() {\n            $.ajax({\n                url: '/geo-collection/info',\n                success: function success(result) {\n                    console.log(result);\n\n                    // let html = `<ul class=\"mt-4 pl-4\">`;\n\n                    // Object.keys(result).forEach(function (item) {\n                    //     html += `<li class=\"mb-2\">\n                    // \t\t\t<a href=\"/geo-collection/${result[item].collectionUuid}\" class=\"font-weight-bold\">Маршрут</a>`;\n                    //     if (typeof gcOpen !== 'undefined') {\n                    //         if (gcOpen === result[item].collectionUuid) {\n                    //             html += ` [<span class=\"text-success\">активен</span>]\n                    // \t\t\t<form method=\"post\" class=\"float-right\">\n                    // \t\t\t    <input type=\"hidden\" name=\"_method\" value=\"delete\">\n                    // \t\t\t\t<button type=\"submit\" class=\"btn btn-sm btn-danger\" style=\"font-size: 11px; padding: 4px 5px 0\"><i class=\"fa fa-trash\"></i> </button>\n                    // \t\t\t</form>`;\n\n                    //         }\n                    //     }\n\n                    //     html += `<div>\n                    // \t\t\tдължина: ${result[item].length} м<br />\n                    // \t\t\tоценен: ${result[item].completion.percentage} %<br />\n                    // \t\t\t\t<div class=\"progress\" style=\"height: 3px;\">\n                    // \t\t\t\t\t<div class=\"progress-bar\" role=\"progressbar\" style=\"width: ${result[item].completion.percentage}%;\" aria-valuenow=\"25\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>\n                    // \t\t\t\t</div>`;\n\n                    //     if(result[item].interconnectedClustersCount > 1) {\n                    //         html += `<span class=\"text-danger\">грешка: в маршрута има прекъсване</span>`;\n                    //     }\n\n                    //     html +=\t`</div>\n                    // \t\t</li>`;\n                    // });\n\n                    // html += `</ul>`;\n\n                    // $('#div3').html(html);\n                }\n            });\n        }\n    }]);\n\n    return Collections;\n}();//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9hc3NldHMvZnJvbnQvanMvY29sbGVjdGlvbnMuanM/NTBhOSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY2xhc3MgQ29sbGVjdGlvbnMge1xuICAgIG1hcEluc3RhbmNlO1xuXG4gICAgY29uc3RydWN0b3IobWFwSW5zdGFuY2UpIHtcbiAgICAgICAgdGhpcy5tYXBJbnN0YW5jZSA9IG1hcEluc3RhbmNlO1xuXG4gICAgICAgIHRoaXMuaW5pdCgpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuZ2V0R2VvQ29sbGVjdGlvbnNMaXN0KCk7XG4gICAgfVxuXG4gICAgZ2V0R2VvQ29sbGVjdGlvbnNMaXN0KCkge1xuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdXJsOiAnL2dlby1jb2xsZWN0aW9uL2luZm8nLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gbGV0IGh0bWwgPSBgPHVsIGNsYXNzPVwibXQtNCBwbC00XCI+YDtcblxuICAgICAgICAgICAgICAgIC8vIE9iamVjdC5rZXlzKHJlc3VsdCkuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgICAgIC8vICAgICBodG1sICs9IGA8bGkgY2xhc3M9XCJtYi0yXCI+XG5cdFx0XHRcdC8vIFx0XHRcdDxhIGhyZWY9XCIvZ2VvLWNvbGxlY3Rpb24vJHtyZXN1bHRbaXRlbV0uY29sbGVjdGlvblV1aWR9XCIgY2xhc3M9XCJmb250LXdlaWdodC1ib2xkXCI+0JzQsNGA0YjRgNGD0YI8L2E+YDtcbiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKHR5cGVvZiBnY09wZW4gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgLy8gICAgICAgICBpZiAoZ2NPcGVuID09PSByZXN1bHRbaXRlbV0uY29sbGVjdGlvblV1aWQpIHtcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICBodG1sICs9IGAgWzxzcGFuIGNsYXNzPVwidGV4dC1zdWNjZXNzXCI+0LDQutGC0LjQstC10L08L3NwYW4+XVxuXHRcdFx0XHQvLyBcdFx0XHQ8Zm9ybSBtZXRob2Q9XCJwb3N0XCIgY2xhc3M9XCJmbG9hdC1yaWdodFwiPlxuXHRcdFx0XHQvLyBcdFx0XHQgICAgPGlucHV0IHR5cGU9XCJoaWRkZW5cIiBuYW1lPVwiX21ldGhvZFwiIHZhbHVlPVwiZGVsZXRlXCI+XG5cdFx0XHRcdC8vIFx0XHRcdFx0PGJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3M9XCJidG4gYnRuLXNtIGJ0bi1kYW5nZXJcIiBzdHlsZT1cImZvbnQtc2l6ZTogMTFweDsgcGFkZGluZzogNHB4IDVweCAwXCI+PGkgY2xhc3M9XCJmYSBmYS10cmFzaFwiPjwvaT4gPC9idXR0b24+XG5cdFx0XHRcdC8vIFx0XHRcdDwvZm9ybT5gO1xuXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gICAgIH1cblxuICAgICAgICAgICAgICAgIC8vICAgICBodG1sICs9IGA8ZGl2PlxuXHRcdFx0XHQvLyBcdFx0XHTQtNGK0LvQttC40L3QsDogJHtyZXN1bHRbaXRlbV0ubGVuZ3RofSDQvDxiciAvPlxuXHRcdFx0XHQvLyBcdFx0XHTQvtGG0LXQvdC10L06ICR7cmVzdWx0W2l0ZW1dLmNvbXBsZXRpb24ucGVyY2VudGFnZX0gJTxiciAvPlxuXHRcdFx0XHQvLyBcdFx0XHRcdDxkaXYgY2xhc3M9XCJwcm9ncmVzc1wiIHN0eWxlPVwiaGVpZ2h0OiAzcHg7XCI+XG5cdFx0XHRcdC8vIFx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVwicHJvZ3Jlc3MtYmFyXCIgcm9sZT1cInByb2dyZXNzYmFyXCIgc3R5bGU9XCJ3aWR0aDogJHtyZXN1bHRbaXRlbV0uY29tcGxldGlvbi5wZXJjZW50YWdlfSU7XCIgYXJpYS12YWx1ZW5vdz1cIjI1XCIgYXJpYS12YWx1ZW1pbj1cIjBcIiBhcmlhLXZhbHVlbWF4PVwiMTAwXCI+PC9kaXY+XG5cdFx0XHRcdC8vIFx0XHRcdFx0PC9kaXY+YDtcblxuICAgICAgICAgICAgICAgIC8vICAgICBpZihyZXN1bHRbaXRlbV0uaW50ZXJjb25uZWN0ZWRDbHVzdGVyc0NvdW50ID4gMSkge1xuICAgICAgICAgICAgICAgIC8vICAgICAgICAgaHRtbCArPSBgPHNwYW4gY2xhc3M9XCJ0ZXh0LWRhbmdlclwiPtCz0YDQtdGI0LrQsDog0LIg0LzQsNGA0YjRgNGD0YLQsCDQuNC80LAg0L/RgNC10LrRitGB0LLQsNC90LU8L3NwYW4+YDtcbiAgICAgICAgICAgICAgICAvLyAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy8gICAgIGh0bWwgKz1cdGA8L2Rpdj5cblx0XHRcdFx0Ly8gXHRcdDwvbGk+YDtcbiAgICAgICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICAgICAgICAgIC8vIGh0bWwgKz0gYDwvdWw+YDtcblxuICAgICAgICAgICAgICAgIC8vICQoJyNkaXYzJykuaHRtbChodG1sKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBhc3NldHMvZnJvbnQvanMvY29sbGVjdGlvbnMuanMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBQTtBQUdBO0FBQUE7QUFDQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTs7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQXZDQTtBQXlDQTs7OztBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n");

/***/ })
/******/ ]);